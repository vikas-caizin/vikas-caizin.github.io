(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{moEF:function(a,e,t){"use strict";t.r(e);var n=t("8Y7J"),r=function(){},o=t("pMnS"),i=t("1Txd"),d=t("yFBK"),m=t("MqE1"),l=t("s7LF"),s=t("PJ54"),p=t("Z3BZ"),u=t("EApP"),c=t("M+tS"),f=t("3yNS"),b=t("IcCv"),g=t("A+V5"),v=t("SVse"),h=t("K/Md"),S=t("7seC"),F=t("iInd"),I=t("hUUB"),E=t("s6ns"),A=t("u1gT"),D=t("TfA5"),_=t("Z725"),C=t("mrSG"),R=t("qHnB"),k=t("HTWL"),M=t("wd/R"),x=function(){function a(a,e,t,n,r,o){this.activatedRoute=a,this._router=e,this.formService=t,this.settingsService=n,this.formDataService=r,this.toasterService=o,this.formSchema=[],this.isFormFill=!0}var e=a.prototype;return e.ngOnInit=function(){var a=this;this.logInEmployeeId=localStorage.getItem("E_Id"),this.activatedRoute.params.subscribe(function(e){a.currentid=e.id,a.dataEntryId=e.id1,a.currentid&&(a.loading=!0,a.formSchema=[],a.formService.getFormDetail(a.currentid).subscribe(function(e){e&&e.success?(a.logInEmployeeId===e.response.form.approverId&&(a.isApproverFilling=!0),a.formName=e.response.form.formName,a.formSchema=e.response.form.formElements,a.formId=e.response.form.formId,a.dataEntryId&&a.formService.getFormDataById(a.dataEntryId).subscribe(function(e){e&&e.response&&e.success&&(a.formDataValue=e.response.data,a.dataCaptureDate=e.response.dataCaptureDate)},function(e){a.formDataValue=[]})):(a.toasterService.error(k.a.PLEASE_TRY_AGAIN),a._router.navigate(["/forms"])),a.loading=!1},function(e){a.loading=!1,403===e.status?(a.toasterService.error(e.error.message),a._router.navigate(["/forms"])):a.toasterService.error(k.a.PLEASE_TRY_AGAIN)}))})},e.getFillPermissions=function(a){return a.fill},e.onFormSubmit=function(a){return Object(C.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,d,m,l,s,p,u,c,f,b,g,v,h,S,F=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.linkedData,r=a.fillAgain,o=(a=a.value).datePickerForForm){e.next=3;break}return e.abrupt("return",void this.toasterService.error(k.a.PLEASE_SELECT_DATE));case 3:if(t=M(o).format("YYYY-MM-DDTHH:mm:00"),i=[],e.prev=5,!this.formSchema.length){e.next=22;break}d=this.formSchema,m=Array.isArray(d),l=0,d=m?d:d[Symbol.iterator]();case 8:if(!m){e.next=14;break}if(!(l>=d.length)){e.next=11;break}return e.abrupt("break",22);case 11:s=d[l++],e.next=18;break;case 14:if(!(l=d.next()).done){e.next=17;break}return e.abrupt("break",22);case 17:s=l.value;case 18:"heading"!==(p=s).field&&"paragraph"!==p.field&&"section_break"!==p.field&&"submit_btn"!==p.field&&i.push({label:p.label,uuid:p.uuid,isMetricField:p.metricEnabled,unitOfMeasurement:p.metricEnabled?p.unitOfMeasurement:void 0,field:p.field});case 20:e.next=8;break;case 22:u=Object.keys(a),c=0;case 24:if(!(c<i.length)){e.next=39;break}if(f=void 0,b=void 0,i[c].isMetricField&&(f=t,b=t),g=a[u[c]],"time"===i[c].field&&(g=M(g).format("hh:mm A")),i[c]={label:i[c].label,key:u[c],value:g,uuid:i[c].uuid,isMetricField:i[c].isMetricField,unitOfMeasurement:i[c].unitOfMeasurement,dataCaptureStart:f||void 0,dataCaptureEnd:b||void 0},!(i[c].value&&i[c].value instanceof File)){e.next=35;break}return e.next=31,this.uploadFile(a[u[c]],this.currentid);case 31:if((v=e.sent)&&v.success){e.next=34;break}throw"Error occurred while uploading file";case 34:i[c].value=v.response.fileURL;case 35:delete a[u[c]];case 36:c++,e.next=24;break;case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(5),i=[];case 44:h=n,this.dataEntryId?this.formDataService.editFormData({formSubmissionUuid:this.dataEntryId,data:i,dataCaptureDate:t}).subscribe(function(a){a&&a.success&&(r?(F.toasterService.success(k.a.FORM_DATA_UPDATED_SUCCESS),window.location.reload()):(F.toasterService.success(k.a.FORM_DATA_UPDATED_SUCCESS),F._router.navigateByUrl("/forms/linked-data-listing")))},function(a){F.toasterService.error(400===a.status?k.a.FORM_DATA_REQUEST_INVALID:403===a.status||405===a.status||205===a.status?a.error.message:k.a.PLEASE_TRY_AGAIN)}):(S={formId:this.formId,data:i,dataCaptureDate:t},h&&(S.linkedFormId=h.linkedFormId,S.linkedFormSubmissionId=h.linkedFormSubmissionId),this.formDataService.addFormData(S).subscribe(function(a){a&&a.success&&(r?(F.toasterService.success(k.a.FORM_DATA_SAVED_SUCCESS),window.location.reload()):(F.toasterService.success(k.a.FORM_DATA_SAVED_SUCCESS),F._router.navigateByUrl("/forms/linked-data-listing")))},function(a){F.toasterService.error(400===a.status?k.a.FORM_DATA_REQUEST_INVALID:403===a.status||205===a.status?a.error.message:k.a.PLEASE_TRY_AGAIN)}));case 46:case"end":return e.stop()}},e,this,[[5,41]])}))},e.getIndex=function(a,e){return a.findIndex(function(a){return a.key===e})},e.uploadFile=function(a,e){return Object(C.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.settingsService.uploadFile({file:a,parentId:e}).toPromise());case 1:case"end":return t.stop()}},t,this)}))},a}(),y=n["\u0275crt"]({encapsulation:0,styles:[[".form-fill-container[_ngcontent-%COMP%]{padding-left:32px;padding-right:32px;padding-top:3rem}.form-name-cls[_ngcontent-%COMP%]{margin-top:16px;padding-left:16px;padding-bottom:16px;font-size:18px;font-weight:500}.forms-listing-container[_ngcontent-%COMP%]{padding-right:32px!important;background-color:#fff!important}"]],data:{}});function T(a){return n["\u0275vid"](0,[(a()(),n["\u0275eld"](0,0,null,null,1,"app-form-renderer",[],null,[[null,"formSchemaChange"],[null,"onSubmit"]],function(a,e,t){var n=!0,r=a.component;return"formSchemaChange"===e&&(n=!1!==(r.formSchema=t)&&n),"onSubmit"===e&&(n=!1!==r.onFormSubmit(t)&&n),n},i.c,i.b)),n["\u0275did"](1,114688,null,0,d.a,[m.a,l.f,s.a,p.a,u.j],{formSchema:[0,"formSchema"],isFormFill:[1,"isFormFill"],formDataValue:[2,"formDataValue"],isApproverFilling:[3,"isApproverFilling"],dataCaptureDate:[4,"dataCaptureDate"]},{onSubmit:"onSubmit"})],function(a,e){var t=e.component;a(e,1,0,t.formSchema,t.isFormFill,t.formDataValue,t.isApproverFilling,t.dataCaptureDate)},null)}function L(a){return n["\u0275vid"](0,[(a()(),n["\u0275eld"](0,0,null,null,14,"div",[["class","form-fill-container"]],null,null,null,null,null)),(a()(),n["\u0275eld"](1,0,null,null,13,"ibm-tabs",[],null,null,null,c.b,c.a)),n["\u0275did"](2,1097728,null,2,f.a,[],null,null),n["\u0275qud"](603979776,1,{tabs:1}),n["\u0275qud"](335544320,2,{tabHeaders:0}),(a()(),n["\u0275eld"](5,0,null,0,5,"ibm-tab",[["heading","Form"]],[[1,"id",0]],null,null,b.b,b.a)),n["\u0275did"](6,114688,[[1,4]],0,g.a,[],{heading:[0,"heading"]},null),(a()(),n["\u0275eld"](7,0,null,0,1,"div",[["class","form-name-cls"]],null,null,null,null,null)),(a()(),n["\u0275ted"](8,null,["",""])),(a()(),n["\u0275and"](16777216,null,0,1,null,T)),n["\u0275did"](10,16384,null,0,v.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(a()(),n["\u0275eld"](11,0,null,0,3,"ibm-tab",[["heading","Past Data"]],[[1,"id",0]],null,null,b.b,b.a)),n["\u0275did"](12,114688,[[1,4]],0,g.a,[],{heading:[0,"heading"]},null),(a()(),n["\u0275eld"](13,0,null,0,1,"app-linked-form-data-listing",[],null,null,null,h.c,h.b)),n["\u0275did"](14,114688,null,0,S.a,[F.l,m.a,F.a,I.a,u.j,E.e,A.a,D.a,_.a,s.a],{isFromFill:[0,"isFromFill"]},null)],function(a,e){var t=e.component;a(e,6,0,"Form"),a(e,10,0,t.formSchema&&t.formSchema.length&&(!t.dataEntryId||t.formDataValue&&t.formDataValue.length)&&!t.loading),a(e,12,0,"Past Data"),a(e,14,0,"true")},function(a,e){var t=e.component;a(e,5,0,n["\u0275nov"](e,6).attrClass),a(e,8,0,t.formName),a(e,11,0,n["\u0275nov"](e,12).attrClass)})}var w=n["\u0275ccf"]("app-form-fill",x,function(a){return n["\u0275vid"](0,[(a()(),n["\u0275eld"](0,0,null,null,1,"app-form-fill",[],null,null,null,L,y)),n["\u0275did"](1,114688,null,0,x,[F.a,F.l,m.a,R.a,I.a,u.j],null,null)],function(a,e){a(e,1,0)},null)},{},{},[]),U=t("No7X"),N=t("bIR2"),P=t("NpSD"),O=t("cbbC"),j=t("Gv0t"),V=t("cN2v"),H=t("gKtx"),q=t("GRwY"),G=t("P08G"),B=t("quVZ"),K=t("t7MO"),Y=t("I0pH"),z=t("sstc"),X=t("t68o"),Z=t("lQmW"),Q=t("/5xB"),J=t("zTFV"),W=t("+GeB"),$=t("jcvr"),aa=t("mEpm"),ea=t("ZHEK"),ta=t("RJDq"),na=t("U6oK"),ra=t("i3NF"),oa=t("QQfA"),ia=t("IP0z"),da=t("POq0"),ma=t("Tq4R"),la=t("rAFq"),sa=t("4D9t"),pa=t("bMPK"),ua=t("UiI2"),ca=t("/HVE"),fa=t("uvqg"),ba=t("f8KH"),ga=t("maoM"),va=t("pQSL"),ha=t("PsxR"),Sa=t("X/pD"),Fa=t("XX5M"),Ia=function(){},Ea=t("nU9L"),Aa=t("+IpF"),Da=t("jQIA"),_a=t("+NSx"),Ca=t("jPU2"),Ra=t("h6sn"),ka=t("nXcq"),Ma=t("eUdb"),xa=t("SpJC"),ya=t("IxoR"),Ta=t("P5T4"),La=t("H+bR"),wa=t("nhzO"),Ua=t("cbyg"),Na=t("niTG"),Pa=t("XBWk"),Oa=t("4UMp"),ja=t("5F/F"),Va=t("3ezH"),Ha=t("zMNK"),qa=t("hOhj"),Ga=t("5GAg"),Ba=t("jRYl"),Ka=t("KL2N"),Ya=t("QX+E"),za=t("Lb5T"),Xa=t("FS8H"),Za=t("ctAq"),Qa=t("kEMu"),Ja=t("vjI9"),Wa=t("yKc8"),$a=t("ezSh"),ae=t("pVHs"),ee=t("ixoK"),te=t("LuTi"),ne=t("h5jA"),re=t("9Ntg"),oe=t("wqUn"),ie=t("HSTZ"),de=t("OZcg"),me=t("nw/W"),le=t("EJfY"),se=t("Tl03"),pe=t("+5LG"),ue=t("HyvF"),ce=t("fF59"),fe=t("GMRT"),be=t("UDqP"),ge=t("bzBv"),ve=t("+Inj"),he=t("CX5l"),Se=t("aI0y"),Fe=t("kdZC"),Ie=t("XdKZ"),Ee=t("4vLU"),Ae=t("Xd0L"),De=t("cUpR"),_e=t("Fwaw"),Ce=t("Gi4r"),Re=t("/m4c"),ke=t("0L0y"),Me=t("Jbdn"),xe=t("L5ej"),ye=t("6TIQ"),Te=t("+nmx"),Le=t("EFU/");t.d(e,"FormFillModuleNgFactory",function(){return we});var we=n["\u0275cmf"](r,[],function(a){return n["\u0275mod"]([n["\u0275mpd"](512,n.ComponentFactoryResolver,n["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,w,i.a,U.a,N.a,P.a,O.a,j.a,V.a,H.a,q.a,G.a,B.a,h.a,K.a,Y.a,z.a,X.a,Z.a,Q.a,J.a,W.a,$.a]],[3,n.ComponentFactoryResolver],n.NgModuleRef]),n["\u0275mpd"](4608,v.NgLocalization,v.NgLocaleLocalization,[n.LOCALE_ID,[2,v["\u0275angular_packages_common_common_a"]]]),n["\u0275mpd"](4608,l.C,l.C,[]),n["\u0275mpd"](4608,l.f,l.f,[]),n["\u0275mpd"](5120,aa.a,ea.a,[[3,aa.a]]),n["\u0275mpd"](5120,ta.a,na.a,[[3,ta.a]]),n["\u0275mpd"](4608,ra.a,ra.a,[ta.a]),n["\u0275mpd"](4608,oa.b,oa.b,[oa.h,oa.d,n.ComponentFactoryResolver,oa.g,oa.e,n.Injector,n.NgZone,v.DOCUMENT,ia.b,[2,v.Location]]),n["\u0275mpd"](5120,oa.i,oa.j,[oa.b]),n["\u0275mpd"](4608,da.a,da.a,[]),n["\u0275mpd"](5120,ma.b,ma.d,[oa.b]),n["\u0275mpd"](4608,ma.e,ma.e,[oa.b,n.Injector,[2,v.Location],ma.b,[2,ma.a],[3,ma.e],oa.d]),n["\u0275mpd"](4608,la.a,la.a,[]),n["\u0275mpd"](5120,sa.a,sa.c,[oa.b]),n["\u0275mpd"](4608,pa.a,ua.a,[[2,pa.b],ca.a]),n["\u0275mpd"](5120,fa.a,ba.a,[[3,fa.a]]),n["\u0275mpd"](4608,s.a,s.a,[n.ComponentFactoryResolver,ta.a]),n["\u0275mpd"](4608,ga.a,ga.a,[n.ComponentFactoryResolver,n.Injector,ta.a]),n["\u0275mpd"](4608,p.a,p.a,[va.a]),n["\u0275mpd"](4608,ha.a,ha.a,[va.a]),n["\u0275mpd"](4608,Sa.a,Sa.a,[va.a]),n["\u0275mpd"](4608,Fa.a,Fa.a,[va.a]),n["\u0275mpd"](4608,R.a,R.a,[va.a]),n["\u0275mpd"](4608,_.a,_.a,[]),n["\u0275mpd"](5120,E.c,E.d,[oa.b]),n["\u0275mpd"](135680,E.e,E.e,[oa.b,n.Injector,[2,v.Location],[2,E.b],E.c,[3,E.e],oa.d]),n["\u0275mpd"](4608,m.a,m.a,[va.a]),n["\u0275mpd"](4608,I.a,I.a,[va.a]),n["\u0275mpd"](4608,A.a,A.a,[va.a]),n["\u0275mpd"](1073742336,v.CommonModule,v.CommonModule,[]),n["\u0275mpd"](1073742336,F.p,F.p,[[2,F.u],[2,F.l]]),n["\u0275mpd"](1073742336,Ia,Ia,[]),n["\u0275mpd"](1073742336,Ea.a,Ea.a,[]),n["\u0275mpd"](1073742336,l.B,l.B,[]),n["\u0275mpd"](1073742336,l.l,l.l,[]),n["\u0275mpd"](1073742336,l.x,l.x,[]),n["\u0275mpd"](1073742336,Aa.c,Aa.c,[]),n["\u0275mpd"](1073742336,Da.a,Da.a,[]),n["\u0275mpd"](1073742336,ea.c,ea.c,[]),n["\u0275mpd"](1073742336,na.b,na.b,[]),n["\u0275mpd"](1073742336,_a.c,_a.c,[]),n["\u0275mpd"](1073742336,Ca.a,Ca.a,[]),n["\u0275mpd"](1073742336,Ra.a,Ra.a,[]),n["\u0275mpd"](1073742336,ka.a,ka.a,[]),n["\u0275mpd"](1073742336,Ma.c,Ma.c,[]),n["\u0275mpd"](1073742336,xa.a,xa.a,[]),n["\u0275mpd"](1073742336,ya.a,ya.a,[]),n["\u0275mpd"](1073742336,Ta.a,Ta.a,[]),n["\u0275mpd"](1073742336,La.a,La.a,[]),n["\u0275mpd"](1073742336,wa.a,wa.a,[]),n["\u0275mpd"](1073742336,Ua.a,Ua.a,[]),n["\u0275mpd"](1073742336,Na.c,Na.c,[]),n["\u0275mpd"](1073742336,Pa.c,Pa.c,[]),n["\u0275mpd"](1073742336,Oa.a,Oa.a,[]),n["\u0275mpd"](1073742336,ja.a,ja.a,[]),n["\u0275mpd"](1073742336,Va.a,Va.a,[]),n["\u0275mpd"](1073742336,ia.a,ia.a,[]),n["\u0275mpd"](1073742336,Ha.f,Ha.f,[]),n["\u0275mpd"](1073742336,ca.b,ca.b,[]),n["\u0275mpd"](1073742336,qa.b,qa.b,[]),n["\u0275mpd"](1073742336,oa.f,oa.f,[]),n["\u0275mpd"](1073742336,da.b,da.b,[]),n["\u0275mpd"](1073742336,Ga.a,Ga.a,[]),n["\u0275mpd"](1073742336,Ba.a,Ba.a,[]),n["\u0275mpd"](1073742336,Ka.a,Ka.a,[]),n["\u0275mpd"](1073742336,Ya.a,Ya.a,[]),n["\u0275mpd"](1073742336,Ya.b,Ya.b,[]),n["\u0275mpd"](1073742336,za.b,za.b,[]),n["\u0275mpd"](1073742336,Xa.b,Xa.b,[]),n["\u0275mpd"](1073742336,ba.b,ba.b,[]),n["\u0275mpd"](1073742336,Za.b,Za.b,[]),n["\u0275mpd"](1073742336,Qa.a,Qa.a,[]),n["\u0275mpd"](1073742336,Ja.b,Ja.b,[]),n["\u0275mpd"](1073742336,Wa.a,Wa.a,[]),n["\u0275mpd"](1073742336,$a.a,$a.a,[]),n["\u0275mpd"](1073742336,ae.a,ae.a,[]),n["\u0275mpd"](1073742336,ee.c,ee.c,[]),n["\u0275mpd"](1073742336,te.d,te.d,[]),n["\u0275mpd"](1073742336,ne.c,ne.c,[]),n["\u0275mpd"](1073742336,re.c,re.c,[]),n["\u0275mpd"](1073742336,oe.b,oe.b,[]),n["\u0275mpd"](1073742336,ie.a,ie.a,[]),n["\u0275mpd"](1073742336,de.a,de.a,[]),n["\u0275mpd"](1073742336,me.b,me.b,[]),n["\u0275mpd"](1073742336,le.a,le.a,[]),n["\u0275mpd"](1073742336,se.a,se.a,[]),n["\u0275mpd"](1073742336,pe.a,pe.a,[]),n["\u0275mpd"](1073742336,ue.a,ue.a,[]),n["\u0275mpd"](1073742336,ce.b,ce.b,[]),n["\u0275mpd"](1073742336,fe.b,fe.b,[]),n["\u0275mpd"](1073742336,be.b,be.b,[]),n["\u0275mpd"](1073742336,ge.b,ge.b,[]),n["\u0275mpd"](1073742336,ve.a,ve.a,[]),n["\u0275mpd"](1073742336,he.a,he.a,[]),n["\u0275mpd"](1073742336,Se.a,Se.a,[]),n["\u0275mpd"](1073742336,Fe.b,Fe.b,[]),n["\u0275mpd"](1073742336,Ie.b,Ie.b,[]),n["\u0275mpd"](1073742336,Ee.b,Ee.b,[]),n["\u0275mpd"](1073742336,Ae.e,Ae.e,[[2,Ae.b],[2,De.f]]),n["\u0275mpd"](1073742336,E.k,E.k,[]),n["\u0275mpd"](1073742336,Ae.g,Ae.g,[]),n["\u0275mpd"](1073742336,_e.c,_e.c,[]),n["\u0275mpd"](1073742336,Ce.a,Ce.a,[]),n["\u0275mpd"](1073742336,Re.a,Re.a,[]),n["\u0275mpd"](1073742336,ke.a,ke.a,[]),n["\u0275mpd"](1073742336,Me.a,Me.a,[]),n["\u0275mpd"](1073742336,xe.a,xe.a,[]),n["\u0275mpd"](1073742336,ye.a,ye.a,[]),n["\u0275mpd"](1073742336,Te.a,Te.a,[]),n["\u0275mpd"](1073742336,r,r,[]),n["\u0275mpd"](1024,F.j,function(){return[[{path:"",component:x}],[{path:"",component:d.a}],[{path:"",component:S.a},{path:":source/filters",component:S.a}],[{path:"",component:d.a}]]},[]),n["\u0275mpd"](256,Le.a,Ya.c,[])])})}}]);