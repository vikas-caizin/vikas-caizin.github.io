function _inheritsLoose(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1bih":function(n,e,t){"use strict";t.d(e,"a",function(){return u});var i=t("mrSG"),l=t("8Y7J"),o=t("ctAq"),r=t("s7LF"),a=t("wd/R"),s=(t("qDrF"),t("qHnB"),t("PsxR"),t("9XGM")),c=(t("Z725"),t("aHAg")),u=function(n){function e(e,t,i,o,r,s,c,u,d){var m;(m=n.call(this)||this).modalService=e,m.analysisService=t,m.goalService=i,m.injector=o,m.confirmationService=r,m._toastrService=s,m.settingsService=c,m.formBuilder=u,m.dialog=d,m.ProgressitemsTemp=[{content:"Not Started",selected:!1},{content:"In Progress",selected:!1},{content:"On  Hold",selected:!1},{content:"Completed",selected:!1},{content:"Rejected",selected:!1}],m.EffectiveitemsTemp=[{content:"Under Observation",selected:!1},{content:"Result as Expected",selected:!1},{content:"Result beyond Expectation",selected:!1},{content:"Result below Expectation",selected:!1}],m.Progressitems=[{content:"Not Started",selected:!1},{content:"In Progress",selected:!1},{content:"On  Hold",selected:!1},{content:"Completed",selected:!1},{content:"Rejected",selected:!1}],m.Effectiveitems=[{content:"Under Observation",selected:!1},{content:"Result as Expected",selected:!1},{content:"Result beyond Expectation",selected:!1},{content:"Result below Expectation",selected:!1}],m.actionTypeItems=[{content:"Containment Action",selected:!1},{content:"Corrective Action",selected:!1}],m.actionTypeItemsTemp=[{content:"Containment Action",selected:!1},{content:"Corrective Action",selected:!1}],m.ProgressitemsObjectOfArrays={containmentForm:m.ProgressitemsTemp,correctiveForm:m.ProgressitemsTemp},m.EffectiveitemsObjectOfArrays={containmentForm:m.EffectiveitemsTemp,correctiveForm:m.EffectiveitemsTemp},m.plannedDatesObject={containmentForm:null,correctiveForm:null},m.dateValues={containmentForm:[],correctiveForm:[]},m.actionFiles={containmentForm:null,correctiveForm:null},m.previousActionFilesObjectOfArrays={containmentForm:[],correctiveForm:[]},m.showCFSObject={containmentForm:!1,correctiveForm:!1},m.isCosDisabled={correctiveForm:!1},m.cosCheckboxLabel={correctiveForm:"Candidate For Standardisation"},m.cosList={correctiveForm:[]},m.showReasonBox={correctiveForm:!1},m.selectedUsers={correctiveForm:"",containmentForm:""},m.description="5MB max file size.",m.title="Upload Attachment",m.buttonText="Add file",m.fileRemark="",m.modalTitle="Add Analysis",m.multiple=!1,m.showCFS=!1,m.showDataSample=!1,m.hasCosChanged=!1,m.value=[],m.previousFileArray=[],m.searchedContainmentUsers=[{content:"Search user to select."}],m.searchedCorrectiveUsers=[{content:"Search user to select."}],m.searchUsersObjectOfArrays={containmentForm:m.searchedContainmentUsers,correctiveForm:m.searchedCorrectiveUsers},m.selectedOwnersArray=[{employeeId:"",isPrimary:!1,userName:"",departmentName:""}],m.selectedViewersArray=[{employeeId:"",userName:"",departmentName:""}],m.selectedViewersObjectOfArrays={containmentForm:m.selectedViewersArray,correctiveForm:m.selectedViewersArray},m.onActionAdd=new l.EventEmitter,m.tabIndex=2,m.resetAnalysis=!1,m.containmentDisable=!1,m.correctiveDisable=!1,m.actionObj={},m.kpiDetails={title:"",goalTag:"",ownerName:"",dataCaptureFrequency:"",reviewFrequency:"",category:"",directionOfGoodness:null,UoM:"string"},m.analysisDataPoint={addedTimestamp:null,actual:null,target:null,upperLimit:null,lowerLimit:null,startTime:"",endTime:""},m.analysisDetails={abnormalityDescription:"",analysisDescription:"",remarkDescription:"",SOPFollowed:!1,abnormilityCause:"",abnormilityCode:"",previousAnalysisFileArray:[]},m.createActionForm(),m.createContainmentAction(),m.currentid=m.injector.get("currentid"),m.showDataSample=m.injector.get("showDataSample"),m.fromCustomReport=m.injector.get("fromCustomReport"),m.kpiDetails.UoM=m.injector.get("UoM");var p="",f="";m.showDataSample&&(m.dataSampleStartDate=m.injector.get("startDate"),m.dataSampleEndDate=m.injector.get("endDate"),p=a(m.dataSampleStartDate).format("DD MMM, YYYY HH:mm"),f=a(m.dataSampleEndDate).format("DD MMM, YYYY HH:mm"));var v=m.injector.get("actual");return isNaN(v)||(v=parseFloat(v).toFixed(2)),m.analysisDataPoint={addedTimestamp:a().format("DD MMM, YYYY HH:mm"),actual:v,target:m.injector.get("target"),upperLimit:m.injector.get("upperLimit"),lowerLimit:m.injector.get("lowerLimit"),startTime:p,endTime:f},m.injector.get("actionId")&&(m.actionId=m.injector.get("actionId")),m.injector.get("analysisId")&&(m.analysisId=m.injector.get("analysisId")),m.injector.get("mode")&&(m.mode=m.injector.get("mode")),m.parentActionId=m.injector.get("parentActionId"),m}_inheritsLoose(e,n);var t=e.prototype;return t.populateKpiDetails=function(n){var e=this;this.kpiDetails.title=n.title,this.kpiDetails.goalTag=n.goalTag,this.kpiDetails.directionOfGoodness=n.directionOfGoodness,this.kpiDetails.UoM=n.uomLabel,n.owners.individuals.forEach(function(n){n.isPrimary&&(e.kpiDetails.ownerName=n.firstname+" "+n.lastname)}),this.settingsService.getCapturefrequency().subscribe(function(t){if(t.success){var i=t.response.find(function(e){return e._id==n.dataCaptureFrequency});i&&(e.kpiDetails.dataCaptureFrequency=i.value)}}),this.settingsService.getReviewfrequency().subscribe(function(t){if(t.success){var i=t.response.find(function(e){return e._id==n.reviewFrequency});i&&(e.kpiDetails.reviewFrequency=i.value)}}),this.settingsService.getCategories().subscribe(function(t){if(t.success){var i=t.response.find(function(e){return e._id==n.category});i&&(e.kpiDetails.category=i.category)}})},t.ngOnInit=function(){var n=this;this.goalService.getGoalDetails(this.currentid).subscribe(function(e){e&&e.success&&n.populateKpiDetails(e.response)}),this.showDataSample||(this.isAddRemark=!0),this.getAnalysis(),"add"==this.mode?this.modalTitle="Add Action":(this.modalTitle="Edit Action",this.getActions()),this.previousFileArray=[]},t.setProgressStatus=function(n){this.ProgressitemsObjectOfArrays[n]=this.ProgressitemsTemp.map(function(n){return n})},t.setEffectiveItemsStatus=function(n){this.EffectiveitemsObjectOfArrays[n]=this.EffectiveitemsTemp.map(function(n){return n})},t.selected=function(n){console.log("Option selected")},t.checkBoxEvent=function(n,e){e.includes("corrective")&&(this.correctiveForm.patchValue({candidateForStandarisation:n.checked}),this.hasCosChanged=!this.hasCosChanged,this.showReasonBoxEvent(e))},t.showReasonBoxEvent=function(n){this.showReasonBox[n]=!(!("containmentForm"===n?this.containmentForm.value.candidateForStandarisation:this.correctiveForm.value.candidateForStandarisation)||"Completed"!==("containmentForm"===n?this.containmentForm.value.progress.content:this.correctiveForm.value.progress.content))},t.selectedProgress=function(n,e){"Completed"!==n.item.content?("correctiveAction"==e?this.correctiveForm.patchValue({effectiveCheckStatus:null}):this.containmentForm.patchValue({effectiveCheckStatus:null}),this.Effectiveitems=[],this.Effectiveitems=this.EffectiveitemsTemp.map(function(n){return n.selected=!1,n}),this.showCFSObject[e]=!1):this.showCFSObject[e]=!0,this.showReasonBoxEvent(e)},t.onOpenOwner=function(n,e){this.searchUsersObjectOfArrays[e]=this.searchedContainmentUsers,this.searchUsersObjectOfArrays[e]=this.searchedCorrectiveUsers},t.onSearchUser=function(n,e){var t=this;this.searchUsersObjectOfArrays[e]=[],this.selectedUsers[e]="",this.setActorId("",e),this.goalService.getUsers(n,!1,"viewer","1").subscribe(function(n){t.searchUsersObjectOfArrays[e]=n.response.map(function(n,e){return n.content=n.firstname+" "+n.lastname,n.id=n.employeeId,n})},function(n){console.log(n)})},t.onSelectedUser=function(n,e){this.selectedUsers[e]=n.content,this.setActorId(n.id,e)},t.setActorId=function(n,e){"containmentForm"==e?this.containmentForm.patchValue({actorId:n}):this.correctiveForm.patchValue({actorId:n})},t.checkIfAlreadySelected=function(n,e){return n.findIndex(function(n){return n.employeeId===e})>-1},t.setProgress=function(n,e){this.ProgressitemsObjectOfArrays[e]=[],this.setProgressStatus(e),this.ProgressitemsObjectOfArrays[e].forEach(function(e){e.content.toUpperCase()==n.toUpperCase()&&(e.selected=!0)})},t.setActionItemType=function(n){this.actionTypeItems=[],this.setActionItemTypeStatus(),this.actionTypeItems.forEach(function(e){e.content.toUpperCase()==n.toUpperCase()&&(e.selected=!0)})},t.setActionItemTypeStatus=function(){this.actionTypeItems=this.actionTypeItemsTemp.map(function(n){return n})},t.setEffectiveStatus=function(n,e){this.EffectiveitemsObjectOfArrays[e]=[],this.setEffectiveItemsStatus(e),this.EffectiveitemsObjectOfArrays[e].forEach(function(e){e.content.toUpperCase()==n.toUpperCase()&&(e.selected=!0)})},t.valueChange=function(n,e){a().diff(n[0],"days"),this.dateValue=n[0],this.plannedDatesObject[e]=n[0]},t.createActionForm=function(){this.correctiveForm=this.formBuilder.group({actionItemType:["",[r.Validators.required]],description:["",[r.Validators.required]],actorId:["",[r.Validators.required]],actionDate:["",[r.Validators.required]],remarkDescription:[""],progress:["Not Started",[r.Validators.required]],effectiveCheckStatus:[""],candidateForStandarisation:[!1],candidateForStandarisationReason:[""]})},t.createContainmentAction=function(){this.containmentForm=this.formBuilder.group({actionItemType:["",[r.Validators.required]],description:["",[r.Validators.required]],actorId:["",[r.Validators.required]],actionDate:["",[r.Validators.required]],remarkDescription:[""],progress:["Not Started",[r.Validators.required]],effectiveCheckStatus:[""]})},t.onSubmit=function(){var n=!1;if(this.plannedDatesObject.containmentForm||this.containmentForm.value.actorId||this.containmentForm.value.progress.content){if(n=!0,!this.containmentForm.value.description)return void this._toastrService.error("Please enter Containment Action description.");if(!this.containmentForm.value.actorId)return void this._toastrService.error("Please fill Containment Action Assigned To.");if(!this.plannedDatesObject.containmentForm)return void this._toastrService.error("Please select Containment Action Planned Date Of Completion.");if(a().diff(this.plannedDatesObject.containmentForm,"days"),!this.containmentForm.value.progress.content)return void this._toastrService.error("Please select the progress of Containment Action.");this.containmentForm.patchValue({actionItemType:"Containment Action"})}if(this.plannedDatesObject.correctiveForm||this.correctiveForm.value.actorId||this.correctiveForm.value.progress.content){if(n=!0,!this.correctiveForm.value.description)return void this._toastrService.error("Please enter Corrective Action description.");if(!this.correctiveForm.value.actorId)return void this._toastrService.error("Please fill Corrective Action Assigned To.");if(1==this.correctiveForm.value.candidateForStandarisation&&""==this.correctiveForm.value.candidateForStandarisationReason)return void this._toastrService.error("Please fill Candidate for Standardisation Reason");if(!this.plannedDatesObject.correctiveForm)return void this._toastrService.error("Please select Corrective Action Planned Date Of Completion.");if(a().diff(this.plannedDatesObject.correctiveForm,"days"),!this.correctiveForm.value.progress.content)return void this._toastrService.error("Please select the progress of Corrective Action.");this.correctiveForm.patchValue({actionItemType:"Corrective Action"})}n?this.analysisId&&this.createAnalysis():this._toastrService.error("Please fill atleast containment action or corrective action!")},t.filesChange=function(n,e){var t=this;n.size?n.forEach(function(n,i){t.actionFiles[e]=n.file}):this.actionFiles[e]=null},t.analysisFilesChange=function(n){var e=this;n.size?n.forEach(function(n,t){e.analysisAttachmentFile=n.file}):this.analysisAttachmentFile=null},t.downloadFile=function(n){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id?n.id:n._id,e.next=3,this.settingsService.getEncryptedFileUrl(t).toPromise();case 3:i=e.sent,window.open(i.response);case 5:case"end":return e.stop()}},e,this)}))},t.onActionSubmit=function(){var n=this.actionForm.value.description;console.log(n)},t.deleteFile=function(n,e,t,i){var l=this;this.deleteFileSub=this.confirmationService.getData().subscribe(function(o){o?l.settingsService.deleteFile({id:n}).subscribe(function(n){l.confirmationService.setData(!1),n.success&&"action"==t&&l.previousActionFilesObjectOfArrays[i].splice(e,1)}):l.deleteFileSub&&l.deleteFileSub.unsubscribe()}),this.modalService.create({component:s.a,inputs:{modalText:"Are you sure you want to delete file?"}})},t.createAnalysis=function(){this.createAction(this.analysisId)},t.getFileData=function(n,e){var t=this;n&&this.settingsService.getFiles(n).subscribe(function(n){n&&n&&(t.previousActionFilesObjectOfArrays[e]=n.response.map(function(n){return{id:n._id,name:n.fileName,url:n.fileURL}}),t.attachmentFile=t.previousActionFilesObjectOfArrays[e][0])})},t.uploadFile=function(n,e,t){void 0===t&&(t=""),this.settingsService.uploadFile({file:n,parentId:e,remark:t}).subscribe(function(n){})},t.editAction=function(n,e){var t=this,i={type:this.containmentForm.value.actionItemType,description:this.containmentForm.value.description,actorId:this.containmentForm.value.actorId,actionDate:new Date(this.plannedDatesObject.containmentForm).getTime(),remark:this.containmentForm.value.remarkDescription,progress:this.containmentForm.value.progress.content,effectiveCheckStatus:this.containmentForm.value.effectiveCheckStatus&&this.containmentForm.value.effectiveCheckStatus.content?this.containmentForm.value.effectiveCheckStatus.content:"-"};if(this.containmentForm.value.actionDate=new Date(this.plannedDatesObject.containmentForm).getTime(),this.analysisService.editAction(i,this.currentid,n,this.containmentActionId).subscribe(function(e){e&&e.success&&(t._toastrService.success("Analysis and actions updated."),null!=t.actionFiles.containmentForm&&t.uploadFile(t.actionFiles.containmentForm,n,t.fileRemark),t.onActionAddSuccess(),t.onCloseModal(),t.isSubmitButtonLoading=!1)}),this.correctiveActionId){var l={type:this.correctiveForm.value.actionItemType,description:this.correctiveForm.value.description,actorId:this.correctiveForm.value.actorId,actionDate:new Date(this.plannedDatesObject.correctiveForm).getTime(),remark:this.correctiveForm.value.remarkDescription,progress:this.correctiveForm.value.progress.content,effectiveCheckStatus:this.correctiveForm.value.effectiveCheckStatus&&this.correctiveForm.value.effectiveCheckStatus.content?this.correctiveForm.value.effectiveCheckStatus.content:"-",candidateForStandarisation:this.correctiveForm.value.candidateForStandarisation,candidateForStandarisationReason:this.correctiveForm.value.candidateForStandarisationReason};this.correctiveForm.value.actionDate=new Date(this.plannedDatesObject.correctiveForm).getTime(),this.analysisService.editAction(l,this.currentid,n,this.correctiveActionId).subscribe(function(e){e&&e.success&&(t._toastrService.success("Analysis and actions updated."),null!=t.actionFiles.correctiveForm&&t.uploadFile(t.actionFiles.correctiveForm,n,t.fileRemark),t.onActionAddSuccess(),!0===l.candidateForStandarisation&&"Completed"===l.progress&&!0===t.hasCosChanged?t.showModal():t.onCloseModal(),t.isSubmitButtonLoading=!1)})}},t.createAction=function(n){var e=this;this.isSubmitButtonLoading=!0;var t=[];this.uploadFile(this.analysisAttachmentFile,n,this.fileRemark),this.plannedDatesObject.containmentForm&&t.push({type:this.containmentForm.value.actionItemType,description:this.containmentForm.value.description,actorId:this.containmentForm.value.actorId,actionDate:new Date(this.plannedDatesObject.containmentForm).getTime(),remark:this.containmentForm.value.remarkDescription,progress:this.containmentForm.value.progress.content,effectiveCheckStatus:this.containmentForm.value.effectiveCheckStatus&&this.containmentForm.value.effectiveCheckStatus.content?this.containmentForm.value.effectiveCheckStatus.content:"-",parentActionId:this.parentActionId}),this.containmentForm.value.actionDate=new Date(this.plannedDatesObject.containmentForm).getTime(),this.plannedDatesObject.correctiveForm&&t.push({type:this.correctiveForm.value.actionItemType,description:this.correctiveForm.value.description,actorId:this.correctiveForm.value.actorId,actionDate:new Date(this.plannedDatesObject.correctiveForm).getTime(),remark:this.correctiveForm.value.remarkDescription,progress:this.correctiveForm.value.progress.content,effectiveCheckStatus:this.correctiveForm.value.effectiveCheckStatus&&this.correctiveForm.value.effectiveCheckStatus.content?this.correctiveForm.value.effectiveCheckStatus.content:"-",candidateForStandarisation:this.correctiveForm.value.candidateForStandarisation,candidateForStandarisationReason:this.correctiveForm.value.candidateForStandarisationReason,parentActionId:this.parentActionId}),this.correctiveForm.value.actionDate=new Date(this.plannedDatesObject.correctiveForm).getTime(),t.forEach("edit"!=this.mode?function(t){0==t.parentActionId&&delete t.parentActionId,e.addAction(t,n)}:function(t){t.type==e.actionObj.type?(0==t.parentActionId&&delete t.parentActionId,e.updateAction(t,n)):(0==t.parentActionId&&delete t.parentActionId,e.addAction(t,n))})},t.onActionAddSuccess=function(){this.onActionAdd.emit(!0)},t.onClose=function(n){},t.onCancel=function(){this.modalService.destroy(0),this.closeModal()},t.onCloseModal=function(){this.modalService.destroy(0)},t.selectTab=function(n){this.tabIndex=n},t.onReset=function(n){0==n?(this.containmentForm.reset(),this.selectedUsers.containmentForm="",this.containmentForm.value.actorId="",this.containmentForm.value.effectiveCheckStatus="",this.containmentForm.value.progress="",this.containmentForm.value.description="-",this.containmentForm.value.remark="-",this.plannedDatesObject.containmentForm=null,this.dateValues.containmentForm=[""],this.containmentForm.value.actionDate="",this.containmentForm.value.actionItemType="Containment Action",this.createContainmentAction()):1==n&&(this.correctiveForm.reset(),this.selectedUsers.correctiveForm="",this.correctiveForm.value.actorId="",this.correctiveForm.value.description="-",this.correctiveForm.value.remark="-",this.correctiveForm.value.effectiveCheckStatus="",this.correctiveForm.value.progress="",this.plannedDatesObject.correctiveForm=null,this.correctiveForm.value.candidateForStandarisation=[!1],this.dateValues.correctiveForm=[""],this.correctiveForm.value.actionDate="",this.correctiveForm.value.actionItemType="Corrective Action",this.containmentForm.value.candidateForStandarisationReason="",this.createActionForm())},t.getAnalysis=function(){var n=this;this.analysisId&&(this.isAnalysisFormLoading=!0,this.analysisService.getAnalysis(this.currentid,this.analysisId).subscribe(function(e){if(e&&e.success){var t=e.response;n.analysisDataPoint.addedTimestamp=a.unix(t.addedTimestamp).format("DD MMM, YYYY HH:mm"),n.analysisDetails.SOPFollowed=t.isSOPFollowed,n.analysisDetails.analysisDescription=t.analysisDescription,n.analysisDetails.remarkDescription=t.remarkDescription,n.analysisDetails.abnormalityDescription=t.abnormalityDescription,n.analysisDetails.previousAnalysisFileArray=t.documents,n.isAbnormilitiesCauseLoading=!0,n.settingsService.getAbnormalityBySOPFollowed(t.isSOPFollowed).subscribe(function(e){if(e&&e.success){var i=e.response.find(function(n){return n.cause==t.abnormalityCause});n.analysisDetails.abnormilityCause=i.cause,n.analysisDetails.abnormilityCode=i.code,n.isAbnormilitiesCauseLoading=!1}},function(e){console.log("err",e),n.isAbnormilitiesCauseLoading=!1}),n.isAnalysisFormLoading=!1}}))},t.getActions=function(){var n=this;this.analysisId&&"edit"==this.mode&&(this.isAnalysisFormLoading=!0,this.analysisService.getActionDetails(this.currentid,this.analysisId,this.actionId).subscribe(function(e){if(e&&e.success){var t,i=e.response;n.actionObj=i,"Containment Action"==i.type?(n.tabIndex=2,n.formType="containment",n.containmentActionId=i._id,t="containmentForm",n.formname="containmentForm",n.containmentForm.patchValue({description:i.description,actorId:i.actorId,progress:{content:i.progress,selected:!0},effectiveCheckStatus:{content:i.effectiveCheckStatus,selected:!0},remarkDescription:i.remark,actionItemType:i.type}),"Completed"==i.progress&&(n.containmentDisable=!0,n.showCFSObject[t]=!0,n.ProgressitemsTemp.push(Object.assign({content:"Rework",selected:!1})),n.ProgressitemsObjectOfArrays[t]=[].concat(n.ProgressitemsTemp),i.cosRequestHistory&&(n.cosList[t]=i.cosRequestHistory,n.cosList[t].forEach(function(n){n.isExpanded=!1})),n.ProgressitemsTemp[3].selected=!0)):"Corrective Action"==i.type&&(n.formType="corrective",n.tabIndex=3,n.correctiveActionId=i._id,t="correctiveForm",n.formname="correctiveForm",n.correctiveForm.patchValue({description:i.description,actorId:i.actorId,progress:{content:i.progress,selected:!0},effectiveCheckStatus:{content:i.effectiveCheckStatus,selected:!0},remarkDescription:i.remark,actionItemType:i.type}),"Completed"==i.progress&&(n.correctiveDisable=!0,n.showCFSObject[t]=!0,n.ProgressitemsTemp.push(Object.assign({content:"Rework",selected:!1})),n.ProgressitemsObjectOfArrays[t]=[].concat(n.ProgressitemsTemp),i.cosRequestHistory&&(n.cosList[t]=i.cosRequestHistory,n.cosList[t].forEach(function(n){n.isExpanded=!1})),!0===i.candidateForStandarisation&&(n.showReasonBox[t]=!0,n.correctiveForm.patchValue({candidateForStandarisationReason:i.candidateForStandarisationReason})),"Pending Approval"==i.candidateForStandarisationApprovalStatus||"Approved"==i.candidateForStandarisationApprovalStatus?n.isCosDisabled[t]=!0:"Rejected"==i.candidateForStandarisationApprovalStatus&&(n.cosCheckboxLabel[t]="Reapply for Candidate For Standardisation"),n.correctiveForm.patchValue({candidateForStandarisation:i.candidateForStandarisation,progress:{content:i.progress,selected:!0}}),n.ProgressitemsTemp[3].selected=!0)),n.selectedUsers[t]=i.actorName,n.setActorId(i.actorId,t),n.plannedDatesObject[t]=new Date(i.actionDate),n.dateValues[t]=[],n.dateValues[t].push(a(i.actionDate).format("DD/MM/YY")),n.getFileData(i._id,t)}n.isAnalysisFormLoading=!1}))},t.addAction=function(n,e){var t=this,i=[];i.push(n),this.analysisService.createAction({actions:i},this.currentid,e).subscribe(function(n){n&&n.success&&(n.response.forEach(function(n){"Containment Action"==n.type?t.containmentActionId=n._id:t.correctiveActionId=n._id}),t._toastrService.success("Action added."),null!=t.actionFiles.containmentForm&&t.uploadFile(t.actionFiles.containmentForm,e,t.fileRemark),null!=t.actionFiles.correctiveForm&&t.uploadFile(t.actionFiles.correctiveForm,e,t.fileRemark),t.onActionAddSuccess(),!0===n.response[0].candidateForStandarisation&&"Completed"===n.response[0].progress&&!0===t.hasCosChanged?t.showModal():t.onCloseModal(),t.isSubmitButtonLoading=!1)})},t.updateAction=function(n,e){var t=this;this.analysisService.editAction(n,this.currentid,e,this.actionId).subscribe(function(i){i&&i.success&&(t._toastrService.success("Action updated."),null!=t.actionFiles.containmentForm&&t.uploadFile(t.actionFiles.containmentForm,e,t.fileRemark),null!=t.actionFiles.correctiveForm&&t.uploadFile(t.actionFiles.correctiveForm,e,t.fileRemark),t.onActionAddSuccess(),!0===n.candidateForStandarisation&&"Completed"===n.progress&&!0===t.hasCosChanged?t.showModal():t.onCloseModal(),t.isSubmitButtonLoading=!1)})},t.showModal=function(){var n=this;this.modalService.create({component:c.a,inputs:{modalText:"Candidate for standardisation has been sent to your supervisor for approval."}}).onDestroy(function(){n.onCloseModal()})},t.toggleExpand=function(n,e){e.isExpanded?(e.isExpanded=!1,e.actions=[]):e.isExpanded=!0},e}(o.a)},Atj1:function(n,e,t){"use strict";t.d(e,"a",function(){return l});var i=t("VphZ"),l=function(n){function e(){var e;return(e=n.apply(this,arguments)||this).chartType="bar",e.showPerformace=!1,e}_inheritsLoose(e,n);var t=e.prototype;return t.getMaxSubGroupValue=function(n,e){var t=0;return n.forEach(function(n){e.forEach(function(e){n[e]>t&&(t=n[e])})}),t},t.drawChart=function(n,e,t,l,o){var r=this;if(n.selectAll("g").remove(),l){var a=l.data||[],s=l.subGroupLabels||[],c=i.o().key(function(n){return n}).entries(s);i.l(a,function(n){return n[l.xLabel]}).keys();var u=0;u=1===a.length?a[0].latestActual<0?1.5*a[0].latestActual:0:(u=a.reduce(function(n,e){return e.latestActual<n?e.latestActual:n},a[0]?a[0].latestActual:0))<0?1.5*u:0;var d=1.1*this.getMaxSubGroupValue(a,s);e=e-50-10,t=(t*=.8)-20-20;var m=7*i.m(a.map(function(n){return n[l.xLabel].length}));m<80&&(m=80);var p=Math.round(e/m),f=m*a.length>e,v=t;f&&(v=t+40);var h=t+20+20+25;f&&(h+=40),(n=n.attr("width",e+50+10).attr("height",h).append("g")).attr("class","d3Chart").attr("transform","translate(50,20)");var g=i.r().domain(a.slice(0,p).map(function(n){return n[l.xLabel]})).range([0,e]).padding([.2]),b=i.s().domain([u,d]).range([t,0]),F=i.c(g),y=i.d(b);n.append("g").attr("class","x axis").attr("transform","translate(0, "+t+")").call(F),r.drawBottomAxisLabel(n,e,v,l),n.append("g").attr("class","y axis").call(y),r.drawLeftAxisLabel(n,t,l),r.addGrid(n,e,t,g,l.bottomTicks,b);var x=g.bandwidth();x/s.length>17.5&&(x=17.5*s.length);var A=g.bandwidth()-x,w=i.r().domain(s).range([0,x]).padding([.05]),C=i.o().key(function(n){return n[l.xLabel]}).entries(a),S=r.toolTipMouseout(),I=r.toolTipMouseover(function(n){var e=C.find(function(e){return e.key==n[l.xLabel]}),t=[];return e.values.forEach(function(n){var e=s.map(function(e){return{background:r.color(e),label:e,value:n[e]?parseFloat(n[e].toFixed(2)):n[e]}});t.push.apply(t,e)}),t},function(n){return n[l.xLabel]}),D=n.append("g").attr("class","bars");if(r.drawBars(D,s,g,b,a.slice(0,p),l,t,e,w,S,I,A),f){var O=n.append("g").attr("class","subBars");r.drawSubBars(O,s,g,b,a,l,t,e,w,30);var k=i.u().domain([0,e]).range(i.q(a.length+1));n.append("rect").attr("transform","translate(0, "+(t+20)+")").attr("class","mover").style("stroke","red").style("stroke-opacity",.1).style("fill","lightSteelBlue").style("fill-opacity",.5).attr("x",0).attr("y",0).attr("height",40).attr("width",Math.round(parseFloat(p*e+"")/a.length)).attr("pointer-events","all").attr("cursor","ew-resize").call(i.f().on("drag",function(){var o,c,u=parseInt(i.y(this).attr("x")),d=u+i.h.dx,m=parseInt(i.y(this).attr("width"));d<0||d+m>e||(i.y(this).attr("x",d),k(u)!==(o=k(d))&&(c=a.slice(o,o+p),g.domain(c.map(function(n){return n[l.xLabel]})),n.select(".x.axis").call(F),D.selectAll(".bargroup").remove(),r.drawBars(D,s,g,b,c,l,t,e,w,S,I,A)))}))}this.createHorizontalLegend(c)}},t.drawSubBars=function(n,e,t,l,o,r,a,s,c,u){var d=i.r().domain(o.map(function(n){return n[r.xLabel]})).range([0,s]).padding([.2]),m=i.s().range([u,0]);m.domain(l.domain());var p=i.r().domain(e).range([0,d.bandwidth()]).padding([.05]),f=this;n.selectAll("group").data(o).enter().append("g").attr("class","subbargroup").attr("transform",function(n){return"translate("+d(n[r.xLabel])+",0)"}).selectAll("rect").data(function(n){return e.map(function(e){return{key:e,value:n[e]}})}).enter().append("rect").style("fill","gray").style("opacity",.5).attr("data-legend",function(n){return n.key}).attr("x",function(n){return p(n.key)}).attr("y",function(n){return a+u+m(n.value)}).attr("width",p.bandwidth()).attr("height",function(n){return u-m(n.value)}).attr("fill",function(n){return f.color(n.key)})},t.drawBars=function(n,e,t,i,l,o,r,a,s,c,u,d){var m=this;n.selectAll("group").data(l).enter().append("g").attr("class","bargroup").attr("transform",function(n){var e=Number(t(n[o.xLabel]));return"translate("+(e+=d/2)+",0)"}).on("mouseout",c).on("mouseover",u).selectAll("rect").data(function(n){return e.map(function(e){return{key:e,value:n[e]}})}).enter().append("rect").attr("data-legend",function(n){return n.key}).attr("x",function(n){return s(n.key)}).attr("y",function(n){return i(n.value)}).attr("width",s.bandwidth()).attr("height",function(n){return r-i(n.value)}).attr("fill",function(n){return m.color(n.key)}),o.showDataPointLabelOnBar&&n.selectAll("group").data(l).enter().append("g").attr("transform",function(n){var e=Number(t(n[o.xLabel]));return"translate("+(e+=d/2)+",0)"}).selectAll("rect").data(function(n){return e.map(function(e){return{key:e,value:n[e]}})}).enter().append("text").text(function(n){var e=n.value;return e%1!=0&&(e=e?Number.parseFloat(e).toFixed(1):""),e}).attr("x",function(n){return s(n.key)+s.bandwidth()/2}).attr("y",function(n){return i(n.value)-2}).style("text-anchor","middle").style("fill","black").style("font-size","0.6875rem").style("transform",'rotate("-90deg")')},e}(t("O62A").a)},aHAg:function(n,e,t){"use strict";t.d(e,"a",function(){return i});var i=function(n){function e(e,t){var i;return(i=n.call(this)||this).modalService=e,i.injector=t,i.modalText=i.injector.get("modalText"),i}_inheritsLoose(e,n);var t=e.prototype;return t.ngOnInit=function(){},t.closeModal=function(){this.modalService.destroy()},e}(t("ciZX").a)},bW04:function(n,e,t){"use strict";var i=t("8Y7J"),l=t("UCDL"),o=t("lZcW"),r=t("SVse"),a=t("jGGp"),s=t("TXHj"),c=t("mEpm"),u=t("g7AK");t("Atj1"),t("PJ54"),t("qDrF"),t("/4G1"),t("5Pgy"),t("iInd"),t.d(e,"a",function(){return d}),t.d(e,"b",function(){return P});var d=i["\u0275crt"]({encapsulation:0,styles:[".add-icon[_ngcontent-%COMP%] {\n        max-width: 16px;\n        max-height: 16px;\n    }\n\n    .add-reason[_ngcontent-%COMP%] {\n        margin-left: 5px;\n        border: none;\n        border-radius: 5px;\n        min-height: 10px;\n        height: 16px;\n        padding: 5px;\n        font-size: 10px;\n        pointer-events: all !important;\n        cursor: pointer !important;\n        outline: none;\n    }\n\n    .loader[_ngcontent-%COMP%] {\n        position: absolute;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background: white;\n        opacity: 1;\n    }\n\n    .loading-container[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        display: flex;\n        place-content: center;\n        background: white;\n        opacity: 0.7;\n    }\n\n    .center-loader-text[_ngcontent-%COMP%] {\n        display: flex;\n        align-items: center;\n        position: absolute;\n    }\n\n    .inline[_ngcontent-%COMP%] {\n        display: inline-block;\n    }\n\n    .value[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        color: #171717;\n        box-sizing: border-box;\n        font: inherit;\n        vertical-align: baseline;\n        font-weight: 400;\n        letter-spacing: 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        line-height: 16px;\n        font-size: 12px;\n        display: inline-block;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        width: auto;\n    }\n\n    .label[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        color: #171717;\n        box-sizing: border-box;\n        font: inherit;\n        vertical-align: baseline;\n        font-weight: 400;\n        letter-spacing: 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        line-height: 16px;\n        font-size: 12px;\n        display: inline-block;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        margin-left: 4px;\n        flex: 1;\n        margin-right: 8px;\n    }\n\n    .tooltip-color[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        color: #0062ff;\n        position: absolute;\n        left: 0;\n        \n        width: 4px;\n        height: 22px;\n        background-color: #DA1E28;\n    }\n\n    .date-tooltip[_ngcontent-%COMP%], .datapoint-tooltip[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        color: #171717;\n        box-sizing: border-box;\n        margin: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        outline: none;\n        display: flex;\n        padding: 4px;\n        flex-flow: row nowrap;\n        width: auto;\n        min-width: 20px;\n        justify-content: flex-start;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .content-box[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        outline: none;\n        color: #171717;\n        position: relative;\n    }\n\n    .mytooltip[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        color: #152935;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        outline: none;\n        background-color: #ffffff;\n        transition: opacity 0.1s;\n        transition-timing-function: cubic-bezier(0.4, 0.14, 0.3, 1);\n        display: inline;\n        box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.2);\n        position: absolute;\n        word-wrap: break-word;\n        z-index: 1059;\n        font-family: 'IBM Plex Sans Condensed', 'Helvetica Neue', Arial, sans-serif;\n        top: 24px;\n        left: 642px;\n        display: none;\n    }\n\n    .legend-container[_ngcontent-%COMP%] {\n        display: flex;\n        flex-wrap: wrap;\n        max-height: 82px;\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n\n    .legend[_ngcontent-%COMP%] {\n        display: flex;\n        margin-bottom: 8px;\n    }\n\n    .legendLabel[_ngcontent-%COMP%] {\n        margin-right: 16px;\n        margin-left: 8px;\n    }\n\n    .svg-container[_ngcontent-%COMP%] {\n        width: 13px;\n        height: 13px;\n        min-width: 13px;\n        min-height: 13px;\n    }\n\n    .date[_ngcontent-%COMP%] {\n        font-weight: bold;\n        font-size: 14px;\n        margin: auto;\n    }\n\n    .abnormality-div[_ngcontent-%COMP%] {\n        margin-bottom: 5px;\n        margin-left: 5px;\n        margin-top: 5px;\n        font-size: 12px;\n        display: block;\n        max-width: 110px;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .see-more-abn[_ngcontent-%COMP%] {\n        text-align: center;\n        font-size: 11px;\n        color: blue;\n        cursor: pointer;\n    }\n\n    .hyper-link[_ngcontent-%COMP%] {\n        color: blue;\n        text-decoration: underline;\n    }\n\n    .icon-16-green[_ngcontent-%COMP%] {\n        fill: green;\n    }\n\n    .icon-16-red[_ngcontent-%COMP%] {\n        fill: red;\n    }\n\n    .show-performance[_ngcontent-%COMP%] {\n        margin-left: auto;\n        margin-right: 2.50rem;\n    }\n\n    .directionGoodness[_ngcontent-%COMP%] {\n        display: flex;\n        margin-right: 25px;\n    }\n\n    .kpiperformance[_ngcontent-%COMP%] {\n        display: flex;\n    }\n\n    .directionGoodness[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .kpiperformance[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n        font-size: 14px;\n        line-height: 0.8rem;\n        display: flex;\n        align-items: end;\n    }\n\n    .graph-top__markers[_ngcontent-%COMP%] {\n        position: absolute;\n        right: 0;\n    }",["[_nghost-%COMP%]{display:block;height:482px;width:482px;margin:auto}.wrapper[_ngcontent-%COMP%]{position:relative;max-width:100%;max-height:100%}svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]],data:{}});function m(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowUp16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,l.a,[i.ElementRef],null,null)],null,null)}function p(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowDown16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,o.a,[i.ElementRef],null,null)],null,null)}function f(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),i["\u0275ted"](-1,null,["NA"]))],null,null)}function v(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-16-green"],["ibmIconArrowUp16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,l.a,[i.ElementRef],null,null)],null,null)}function h(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-16-red"],["ibmIconArrowDown16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,o.a,[i.ElementRef],null,null)],null,null)}function g(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,16,"div",[["class","legend show-performance"]],null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,6,"div",[["class","directionGoodness"]],null,null,null,null,null)),(n()(),i["\u0275eld"](2,0,null,null,5,"p",[],null,null,null,null,null)),(n()(),i["\u0275ted"](-1,null,["Direction\xa0of\xa0Goodness: "])),(n()(),i["\u0275and"](16777216,null,null,1,null,m)),i["\u0275did"](5,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,p)),i["\u0275did"](7,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275eld"](8,0,null,null,8,"div",[["class","kpiperformance"]],null,null,null,null,null)),(n()(),i["\u0275eld"](9,0,null,null,7,"p",[],null,null,null,null,null)),(n()(),i["\u0275ted"](-1,null,["KPI\xa0Performance: "])),(n()(),i["\u0275and"](16777216,null,null,1,null,f)),i["\u0275did"](12,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,v)),i["\u0275did"](14,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,h)),i["\u0275did"](16,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,5,0,t.dogForSingleKPI&&"HTB"==t.dogForSingleKPI),n(e,7,0,t.dogForSingleKPI&&"LTB"==t.dogForSingleKPI),n(e,12,0,!t.kpiPerformance),n(e,14,0,"GREEN"===t.kpiPerformance),n(e,16,0,"RED"===t.kpiPerformance)},null)}function b(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,3,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowUp16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,l.a,[i.ElementRef],null,null),(n()(),i["\u0275eld"](3,0,null,null,1,":svg:title",[],null,null,null,null,null)),(n()(),i["\u0275ted"](-1,null,["HTB"]))],null,null)}function F(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,3,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowDown16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,o.a,[i.ElementRef],null,null),(n()(),i["\u0275eld"](3,0,null,null,1,":svg:title",[],null,null,null,null,null)),(n()(),i["\u0275ted"](-1,null,["LTB"]))],null,null)}function y(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,9,"div",[["class","legend"]],null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,2,"div",[["class","svg-container"]],null,null,null,null,null)),(n()(),i["\u0275eld"](2,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(n()(),i["\u0275eld"](3,0,null,null,0,":svg:rect",[["height","15"],["rx","1"],["ry","1"],["width","15"],["x","0"],["y","0"]],[[4,"fill",null]],null,null,null,null)),(n()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","legendLabel"],["style","display: flex;"]],null,null,null,null,null)),(n()(),i["\u0275ted"](5,null,[" "," "])),(n()(),i["\u0275and"](16777216,null,null,1,null,b)),i["\u0275did"](7,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,F)),i["\u0275did"](9,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,7,0,e.context.$implicit&&e.context.$implicit.dog&&"HTB"==e.context.$implicit.dog),n(e,9,0,e.context.$implicit&&e.context.$implicit.dog&&"LTB"==e.context.$implicit.dog)},function(n,e){n(e,3,0,e.context.$implicit.color),n(e,5,0,e.context.$implicit.label)})}function x(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,2,"div",[["style","display: flex;flex-wrap: wrap;"]],null,null,null,null,null)),(n()(),i["\u0275and"](16777216,null,null,1,null,y)),i["\u0275did"](2,278528,null,0,r.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,2,0,e.component.legendAttr)},null)}function A(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,6,"div",[["class","loader"]],null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,0,"div",[["class","loading-container"]],null,null,null,null,null)),(n()(),i["\u0275eld"](2,0,null,null,4,"div",[["class","metadiv center-loader-text"]],null,null,null,null,null)),(n()(),i["\u0275eld"](3,0,null,null,1,"ibm-loading",[["class","inline"],["size","sm"]],[[2,"bx--loading-overlay",null]],null,null,a.b,a.a)),i["\u0275did"](4,49152,null,0,s.a,[c.a],{size:[0,"size"]},null),(n()(),i["\u0275eld"](5,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(n()(),i["\u0275ted"](-1,null,["Loading..."]))],function(n,e){n(e,4,0,"sm")},function(n,e){n(e,3,0,i["\u0275nov"](e,4).overlay)})}function w(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,2,"p",[["class","value"]],null,null,null,null,null)),(n()(),i["\u0275ted"](1,null,[" ",""])),i["\u0275ppd"](2,2)],null,function(n,e){var t=e.component,l=i["\u0275unv"](e,1,0,n(e,2,0,i["\u0275nov"](e.parent,0),t.dataPoints[0].dataPointDate,"mediumDate"));n(e,1,0,l)})}function C(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,5,"div",[["class","datapoint-tooltip"]],null,null,null,null,null)),(n()(),i["\u0275eld"](2,0,null,null,0,"a",[["class","tooltip-color"]],[[4,"background",null]],null,null,null,null)),(n()(),i["\u0275eld"](3,0,null,null,1,"p",[["class","label"]],null,null,null,null,null)),(n()(),i["\u0275ted"](4,null,["",""])),(n()(),i["\u0275eld"](5,0,null,null,1,"p",[["class","value"]],null,null,null,null,null)),(n()(),i["\u0275ted"](6,null,["",""]))],null,function(n,e){n(e,2,0,e.context.$implicit.background),n(e,4,0,e.context.$implicit.label),n(e,6,0,e.context.$implicit.value)})}function S(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","date-tooltip"]],null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,1,"p",[["class","date"]],null,null,null,null,null)),(n()(),i["\u0275ted"](-1,null,["Analysis"]))],null,null)}function I(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","abnormality-div hyper-link"]],[[8,"title",0]],[[null,"click"]],function(n,e,t){var i=!0;return"click"===e&&(i=!1!==n.component.showMoreAbn(t,n.context.$implicit)&&i),i},null,null)),(n()(),i["\u0275ted"](1,null,[" ",". ",""]))],null,function(n,e){n(e,0,0,i["\u0275inlineInterpolate"](1,"",e.context.$implicit.abnormalityDescription,"")),n(e,1,0,e.context.index+1,e.context.$implicit.abnormalityDescription)})}function D(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","abnormality-div see-more-abn"],["title","See more"]],null,[[null,"click"]],function(n,e,t){var i=!0;return"click"===e&&(i=!1!==n.component.showMoreAbn(t)&&i),i},null,null)),(n()(),i["\u0275ted"](-1,null,["See more"]))],null,null)}function O(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),i["\u0275and"](16777216,null,null,1,null,S)),i["\u0275did"](2,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,I)),i["\u0275did"](4,278528,null,0,r.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,D)),i["\u0275did"](6,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,2,0,t.abnormalities&&t.abnormalities.length>0),n(e,4,0,t.abnormalities),n(e,6,0,t.moreAbnormalities)},null)}function k(n){return i["\u0275vid"](0,[(n()(),i["\u0275eld"](0,0,null,null,3,"div",[["class","date-tooltip"]],null,null,null,null,null)),(n()(),i["\u0275eld"](1,0,null,null,2,"button",[["class","add-reason"],["ibmButton","danger"]],[[2,"bx--btn",null],[2,"bx--btn--primary",null],[2,"bx--btn--secondary",null],[2,"bx--btn--tertiary",null],[2,"bx--btn--ghost",null],[2,"bx--btn--danger",null],[2,"bx--btn--danger--primary",null],[2,"bx--skeleton",null],[2,"bx--btn--sm",null],[2,"bx--toolbar-action",null],[2,"bx--overflow-menu",null]],[[null,"click"]],function(n,e,t){var i=!0,l=n.component;return"click"===e&&(i=!1!==l.onAddAnalysis(t,l.dataPoint)&&i),i},null,null)),i["\u0275did"](2,16384,null,0,u.a,[],{ibmButton:[0,"ibmButton"]},null),(n()(),i["\u0275ted"](-1,null,[" Add Analysis "]))],function(n,e){n(e,2,0,"danger")},function(n,e){n(e,1,1,[i["\u0275nov"](e,2).baseClass,i["\u0275nov"](e,2).primaryButton,i["\u0275nov"](e,2).secondaryButton,i["\u0275nov"](e,2).tertiaryButton,i["\u0275nov"](e,2).ghostButton,i["\u0275nov"](e,2).dangerButton,i["\u0275nov"](e,2).dangerPrimaryButton,i["\u0275nov"](e,2).skeleton,i["\u0275nov"](e,2).smallSize,i["\u0275nov"](e,2).toolbarAction,i["\u0275nov"](e,2).overflowMenu])})}function P(n){return i["\u0275vid"](0,[i["\u0275pid"](0,r.DatePipe,[i.LOCALE_ID]),i["\u0275qud"](671088640,1,{svgRef:0}),(n()(),i["\u0275eld"](2,0,null,null,27,"div",[["class","wrapper"]],null,null,null,null,null)),(n()(),i["\u0275eld"](3,0,null,null,2,"div",[["class","legend-container graph-top__markers"]],null,null,null,null,null)),(n()(),i["\u0275and"](16777216,null,null,1,null,g)),i["\u0275did"](5,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275eld"](6,0,[[1,0],["svg",1]],null,0,":svg:svg",[],null,null,null,null,null)),(n()(),i["\u0275eld"](7,0,null,null,2,"div",[["class","legend-container"]],null,null,null,null,null)),(n()(),i["\u0275and"](16777216,null,null,1,null,x)),i["\u0275did"](9,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,A)),i["\u0275did"](11,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275eld"](12,0,null,null,17,"div",[["class","clickable mytooltip"]],[[4,"display",null],[4,"top","px"],[4,"left","px"]],null,null,null,null)),(n()(),i["\u0275eld"](13,0,null,null,16,"div",[["class","content-box"]],null,null,null,null,null)),(n()(),i["\u0275eld"](14,0,null,null,15,"div",[["class","multi-tooltip"]],null,null,null,null,null)),(n()(),i["\u0275eld"](15,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),i["\u0275eld"](16,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),i["\u0275eld"](17,0,null,null,2,"div",[["class","date-tooltip"]],null,null,null,null,null)),(n()(),i["\u0275eld"](18,0,null,null,1,"p",[["class","date"]],null,null,null,null,null)),(n()(),i["\u0275ted"](19,null,["",""])),(n()(),i["\u0275eld"](20,0,null,null,2,"div",[["style","text-align: center; align-items: center;"]],null,null,null,null,null)),(n()(),i["\u0275and"](16777216,null,null,1,null,w)),i["\u0275did"](22,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,C)),i["\u0275did"](24,278528,null,0,r.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),i["\u0275eld"](25,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),i["\u0275and"](16777216,null,null,1,null,O)),i["\u0275did"](27,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["\u0275and"](16777216,null,null,1,null,k)),i["\u0275did"](29,16384,null,0,r.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,5,0,t.showPerformace),n(e,9,0,t.displayLegend),n(e,11,0,t.loading),n(e,22,0,t.dataPoints.length>0&&t.dataPoints[0].dataPointDate),n(e,24,0,t.dataPoints),n(e,27,0,t.isAbnormality),n(e,29,0,t.isAbnormality)},function(n,e){var t=e.component;n(e,12,0,t.displayToolTip,t.toolTipTop,t.toolTipLeft),n(e,19,0,t.toolTipPeriod)})}}}]);