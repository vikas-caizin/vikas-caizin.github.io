(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1bih":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("mrSG"),l=n("8Y7J"),o=n("ctAq"),s=n("s7LF"),a=n("wd/R"),r=(n("qDrF"),n("qHnB"),n("PsxR"),n("9XGM")),c=(n("Z725"),n("aHAg"));class u extends o.a{constructor(e,t,n,i,o,s,r,c,u){super(),this.modalService=e,this.analysisService=t,this.goalService=n,this.injector=i,this.confirmationService=o,this._toastrService=s,this.settingsService=r,this.formBuilder=c,this.dialog=u,this.ProgressitemsTemp=[{content:"Not Started",selected:!1},{content:"In Progress",selected:!1},{content:"On  Hold",selected:!1},{content:"Completed",selected:!1},{content:"Rejected",selected:!1}],this.EffectiveitemsTemp=[{content:"Under Observation",selected:!1},{content:"Result as Expected",selected:!1},{content:"Result beyond Expectation",selected:!1},{content:"Result below Expectation",selected:!1}],this.Progressitems=[{content:"Not Started",selected:!1},{content:"In Progress",selected:!1},{content:"On  Hold",selected:!1},{content:"Completed",selected:!1},{content:"Rejected",selected:!1}],this.Effectiveitems=[{content:"Under Observation",selected:!1},{content:"Result as Expected",selected:!1},{content:"Result beyond Expectation",selected:!1},{content:"Result below Expectation",selected:!1}],this.actionTypeItems=[{content:"Containment Action",selected:!1},{content:"Corrective Action",selected:!1}],this.actionTypeItemsTemp=[{content:"Containment Action",selected:!1},{content:"Corrective Action",selected:!1}],this.ProgressitemsObjectOfArrays={containmentForm:this.ProgressitemsTemp,correctiveForm:this.ProgressitemsTemp},this.EffectiveitemsObjectOfArrays={containmentForm:this.EffectiveitemsTemp,correctiveForm:this.EffectiveitemsTemp},this.plannedDatesObject={containmentForm:null,correctiveForm:null},this.dateValues={containmentForm:[],correctiveForm:[]},this.actionFiles={containmentForm:null,correctiveForm:null},this.previousActionFilesObjectOfArrays={containmentForm:[],correctiveForm:[]},this.showCFSObject={containmentForm:!1,correctiveForm:!1},this.isCosDisabled={correctiveForm:!1},this.cosCheckboxLabel={correctiveForm:"Candidate For Standardisation"},this.cosList={correctiveForm:[]},this.showReasonBox={correctiveForm:!1},this.selectedUsers={correctiveForm:"",containmentForm:""},this.description="5MB max file size.",this.title="Upload Attachment",this.buttonText="Add file",this.fileRemark="",this.modalTitle="Add Analysis",this.multiple=!1,this.showCFS=!1,this.showDataSample=!1,this.hasCosChanged=!1,this.value=[],this.previousFileArray=[],this.searchedContainmentUsers=[{content:"Search user to select."}],this.searchedCorrectiveUsers=[{content:"Search user to select."}],this.searchUsersObjectOfArrays={containmentForm:this.searchedContainmentUsers,correctiveForm:this.searchedCorrectiveUsers},this.selectedOwnersArray=[{employeeId:"",isPrimary:!1,userName:"",departmentName:""}],this.selectedViewersArray=[{employeeId:"",userName:"",departmentName:""}],this.selectedViewersObjectOfArrays={containmentForm:this.selectedViewersArray,correctiveForm:this.selectedViewersArray},this.onActionAdd=new l.EventEmitter,this.tabIndex=2,this.resetAnalysis=!1,this.containmentDisable=!1,this.correctiveDisable=!1,this.actionObj={},this.kpiDetails={title:"",goalTag:"",ownerName:"",dataCaptureFrequency:"",reviewFrequency:"",category:"",directionOfGoodness:null,UoM:"string"},this.analysisDataPoint={addedTimestamp:null,actual:null,target:null,upperLimit:null,lowerLimit:null,startTime:"",endTime:""},this.analysisDetails={abnormalityDescription:"",analysisDescription:"",remarkDescription:"",SOPFollowed:!1,abnormilityCause:"",abnormilityCode:"",previousAnalysisFileArray:[]},this.createActionForm(),this.createContainmentAction(),this.currentid=this.injector.get("currentid"),this.showDataSample=this.injector.get("showDataSample"),this.fromCustomReport=this.injector.get("fromCustomReport"),this.kpiDetails.UoM=this.injector.get("UoM");let d="",m="";this.showDataSample&&(this.dataSampleStartDate=this.injector.get("startDate"),this.dataSampleEndDate=this.injector.get("endDate"),d=a(this.dataSampleStartDate).format("DD MMM, YYYY HH:mm"),m=a(this.dataSampleEndDate).format("DD MMM, YYYY HH:mm"));let h=this.injector.get("actual");isNaN(h)||(h=parseFloat(h).toFixed(2)),this.analysisDataPoint={addedTimestamp:a().format("DD MMM, YYYY HH:mm"),actual:h,target:this.injector.get("target"),upperLimit:this.injector.get("upperLimit"),lowerLimit:this.injector.get("lowerLimit"),startTime:d,endTime:m},this.injector.get("actionId")&&(this.actionId=this.injector.get("actionId")),this.injector.get("analysisId")&&(this.analysisId=this.injector.get("analysisId")),this.injector.get("mode")&&(this.mode=this.injector.get("mode")),this.parentActionId=this.injector.get("parentActionId")}populateKpiDetails(e){this.kpiDetails.title=e.title,this.kpiDetails.goalTag=e.goalTag,this.kpiDetails.directionOfGoodness=e.directionOfGoodness,this.kpiDetails.UoM=e.uomLabel,e.owners.individuals.forEach(e=>{e.isPrimary&&(this.kpiDetails.ownerName=e.firstname+" "+e.lastname)}),this.settingsService.getCapturefrequency().subscribe(t=>{if(t.success){let n=t.response.find(t=>t._id==e.dataCaptureFrequency);n&&(this.kpiDetails.dataCaptureFrequency=n.value)}}),this.settingsService.getReviewfrequency().subscribe(t=>{if(t.success){let n=t.response.find(t=>t._id==e.reviewFrequency);n&&(this.kpiDetails.reviewFrequency=n.value)}}),this.settingsService.getCategories().subscribe(t=>{if(t.success){let n=t.response.find(t=>t._id==e.category);n&&(this.kpiDetails.category=n.category)}})}ngOnInit(){this.goalService.getGoalDetails(this.currentid).subscribe(e=>{e&&e.success&&this.populateKpiDetails(e.response)}),this.showDataSample||(this.isAddRemark=!0),this.getAnalysis(),"add"==this.mode?this.modalTitle="Add Action":(this.modalTitle="Edit Action",this.getActions()),this.previousFileArray=[]}setProgressStatus(e){this.ProgressitemsObjectOfArrays[e]=this.ProgressitemsTemp.map(e=>e)}setEffectiveItemsStatus(e){this.EffectiveitemsObjectOfArrays[e]=this.EffectiveitemsTemp.map(e=>e)}selected(e){console.log("Option selected")}checkBoxEvent(e,t){t.includes("corrective")&&(this.correctiveForm.patchValue({candidateForStandarisation:e.checked}),this.hasCosChanged=!this.hasCosChanged,this.showReasonBoxEvent(t))}showReasonBoxEvent(e){this.showReasonBox[e]=!(!("containmentForm"===e?this.containmentForm.value.candidateForStandarisation:this.correctiveForm.value.candidateForStandarisation)||"Completed"!==("containmentForm"===e?this.containmentForm.value.progress.content:this.correctiveForm.value.progress.content))}selectedProgress(e,t){"Completed"!==e.item.content?("correctiveAction"==t?this.correctiveForm.patchValue({effectiveCheckStatus:null}):this.containmentForm.patchValue({effectiveCheckStatus:null}),this.Effectiveitems=[],this.Effectiveitems=this.EffectiveitemsTemp.map(e=>(e.selected=!1,e)),this.showCFSObject[t]=!1):this.showCFSObject[t]=!0,this.showReasonBoxEvent(t)}onOpenOwner(e,t){this.searchUsersObjectOfArrays[t]=this.searchedContainmentUsers,this.searchUsersObjectOfArrays[t]=this.searchedCorrectiveUsers}onSearchUser(e,t){this.searchUsersObjectOfArrays[t]=[],this.selectedUsers[t]="",this.setActorId("",t),this.goalService.getUsers(e,!1,"viewer","1").subscribe(e=>{this.searchUsersObjectOfArrays[t]=e.response.map((e,t)=>(e.content=e.firstname+" "+e.lastname,e.id=e.employeeId,e))},e=>{console.log(e)})}onSelectedUser(e,t){this.selectedUsers[t]=e.content,this.setActorId(e.id,t)}setActorId(e,t){"containmentForm"==t?this.containmentForm.patchValue({actorId:e}):this.correctiveForm.patchValue({actorId:e})}checkIfAlreadySelected(e,t){return e.findIndex(e=>e.employeeId===t)>-1}setProgress(e,t){this.ProgressitemsObjectOfArrays[t]=[],this.setProgressStatus(t),this.ProgressitemsObjectOfArrays[t].forEach(t=>{t.content.toUpperCase()==e.toUpperCase()&&(t.selected=!0)})}setActionItemType(e){this.actionTypeItems=[],this.setActionItemTypeStatus(),this.actionTypeItems.forEach(t=>{t.content.toUpperCase()==e.toUpperCase()&&(t.selected=!0)})}setActionItemTypeStatus(){this.actionTypeItems=this.actionTypeItemsTemp.map(e=>e)}setEffectiveStatus(e,t){this.EffectiveitemsObjectOfArrays[t]=[],this.setEffectiveItemsStatus(t),this.EffectiveitemsObjectOfArrays[t].forEach(t=>{t.content.toUpperCase()==e.toUpperCase()&&(t.selected=!0)})}valueChange(e,t){a().diff(e[0],"days"),this.dateValue=e[0],this.plannedDatesObject[t]=e[0]}createActionForm(){this.correctiveForm=this.formBuilder.group({actionItemType:["",[s.Validators.required]],description:["",[s.Validators.required]],actorId:["",[s.Validators.required]],actionDate:["",[s.Validators.required]],remarkDescription:[""],progress:["Not Started",[s.Validators.required]],effectiveCheckStatus:[""],candidateForStandarisation:[!1],candidateForStandarisationReason:[""]})}createContainmentAction(){this.containmentForm=this.formBuilder.group({actionItemType:["",[s.Validators.required]],description:["",[s.Validators.required]],actorId:["",[s.Validators.required]],actionDate:["",[s.Validators.required]],remarkDescription:[""],progress:["Not Started",[s.Validators.required]],effectiveCheckStatus:[""]})}onSubmit(){let e=!1;if(this.plannedDatesObject.containmentForm||this.containmentForm.value.actorId||this.containmentForm.value.progress.content){if(e=!0,!this.containmentForm.value.description)return void this._toastrService.error("Please enter Containment Action description.");if(!this.containmentForm.value.actorId)return void this._toastrService.error("Please fill Containment Action Assigned To.");if(!this.plannedDatesObject.containmentForm)return void this._toastrService.error("Please select Containment Action Planned Date Of Completion.");if(a().diff(this.plannedDatesObject.containmentForm,"days"),!this.containmentForm.value.progress.content)return void this._toastrService.error("Please select the progress of Containment Action.");this.containmentForm.patchValue({actionItemType:"Containment Action"})}if(this.plannedDatesObject.correctiveForm||this.correctiveForm.value.actorId||this.correctiveForm.value.progress.content){if(e=!0,!this.correctiveForm.value.description)return void this._toastrService.error("Please enter Corrective Action description.");if(!this.correctiveForm.value.actorId)return void this._toastrService.error("Please fill Corrective Action Assigned To.");if(1==this.correctiveForm.value.candidateForStandarisation&&""==this.correctiveForm.value.candidateForStandarisationReason)return void this._toastrService.error("Please fill Candidate for Standardisation Reason");if(!this.plannedDatesObject.correctiveForm)return void this._toastrService.error("Please select Corrective Action Planned Date Of Completion.");if(a().diff(this.plannedDatesObject.correctiveForm,"days"),!this.correctiveForm.value.progress.content)return void this._toastrService.error("Please select the progress of Corrective Action.");this.correctiveForm.patchValue({actionItemType:"Corrective Action"})}e?this.analysisId&&this.createAnalysis():this._toastrService.error("Please fill atleast containment action or corrective action!")}filesChange(e,t){e.size?e.forEach((e,n)=>{this.actionFiles[t]=e.file}):this.actionFiles[t]=null}analysisFilesChange(e){e.size?e.forEach((e,t)=>{this.analysisAttachmentFile=e.file}):this.analysisAttachmentFile=null}downloadFile(e){return Object(i.__awaiter)(this,void 0,void 0,function*(){let t=e.id?e.id:e._id,n=yield this.settingsService.getEncryptedFileUrl(t).toPromise();window.open(n.response)})}onActionSubmit(){const{description:e}=this.actionForm.value;console.log(e)}deleteFile(e,t,n,i){this.deleteFileSub=this.confirmationService.getData().subscribe(l=>{l?this.settingsService.deleteFile({id:e}).subscribe(e=>{this.confirmationService.setData(!1),e.success&&"action"==n&&this.previousActionFilesObjectOfArrays[i].splice(t,1)}):this.deleteFileSub&&this.deleteFileSub.unsubscribe()}),this.modalService.create({component:r.a,inputs:{modalText:"Are you sure you want to delete file?"}})}createAnalysis(){this.createAction(this.analysisId)}getFileData(e,t){e&&this.settingsService.getFiles(e).subscribe(e=>{e&&e&&(this.previousActionFilesObjectOfArrays[t]=e.response.map(({_id:e,fileName:t,fileURL:n})=>({id:e,name:t,url:n})),this.attachmentFile=this.previousActionFilesObjectOfArrays[t][0])})}uploadFile(e,t,n=""){this.settingsService.uploadFile({file:e,parentId:t,remark:n}).subscribe(e=>{})}editAction(e,t){let n={type:this.containmentForm.value.actionItemType,description:this.containmentForm.value.description,actorId:this.containmentForm.value.actorId,actionDate:new Date(this.plannedDatesObject.containmentForm).getTime(),remark:this.containmentForm.value.remarkDescription,progress:this.containmentForm.value.progress.content,effectiveCheckStatus:this.containmentForm.value.effectiveCheckStatus&&this.containmentForm.value.effectiveCheckStatus.content?this.containmentForm.value.effectiveCheckStatus.content:"-"};if(this.containmentForm.value.actionDate=new Date(this.plannedDatesObject.containmentForm).getTime(),this.analysisService.editAction(n,this.currentid,e,this.containmentActionId).subscribe(t=>{t&&t.success&&(this._toastrService.success("Analysis and actions updated."),null!=this.actionFiles.containmentForm&&this.uploadFile(this.actionFiles.containmentForm,e,this.fileRemark),this.onActionAddSuccess(),this.onCloseModal(),this.isSubmitButtonLoading=!1)}),this.correctiveActionId){let t={type:this.correctiveForm.value.actionItemType,description:this.correctiveForm.value.description,actorId:this.correctiveForm.value.actorId,actionDate:new Date(this.plannedDatesObject.correctiveForm).getTime(),remark:this.correctiveForm.value.remarkDescription,progress:this.correctiveForm.value.progress.content,effectiveCheckStatus:this.correctiveForm.value.effectiveCheckStatus&&this.correctiveForm.value.effectiveCheckStatus.content?this.correctiveForm.value.effectiveCheckStatus.content:"-",candidateForStandarisation:this.correctiveForm.value.candidateForStandarisation,candidateForStandarisationReason:this.correctiveForm.value.candidateForStandarisationReason};this.correctiveForm.value.actionDate=new Date(this.plannedDatesObject.correctiveForm).getTime(),this.analysisService.editAction(t,this.currentid,e,this.correctiveActionId).subscribe(n=>{n&&n.success&&(this._toastrService.success("Analysis and actions updated."),null!=this.actionFiles.correctiveForm&&this.uploadFile(this.actionFiles.correctiveForm,e,this.fileRemark),this.onActionAddSuccess(),!0===t.candidateForStandarisation&&"Completed"===t.progress&&!0===this.hasCosChanged?this.showModal():this.onCloseModal(),this.isSubmitButtonLoading=!1)})}}createAction(e){this.isSubmitButtonLoading=!0;var t=[];this.uploadFile(this.analysisAttachmentFile,e,this.fileRemark),this.plannedDatesObject.containmentForm&&t.push({type:this.containmentForm.value.actionItemType,description:this.containmentForm.value.description,actorId:this.containmentForm.value.actorId,actionDate:new Date(this.plannedDatesObject.containmentForm).getTime(),remark:this.containmentForm.value.remarkDescription,progress:this.containmentForm.value.progress.content,effectiveCheckStatus:this.containmentForm.value.effectiveCheckStatus&&this.containmentForm.value.effectiveCheckStatus.content?this.containmentForm.value.effectiveCheckStatus.content:"-",parentActionId:this.parentActionId}),this.containmentForm.value.actionDate=new Date(this.plannedDatesObject.containmentForm).getTime(),this.plannedDatesObject.correctiveForm&&t.push({type:this.correctiveForm.value.actionItemType,description:this.correctiveForm.value.description,actorId:this.correctiveForm.value.actorId,actionDate:new Date(this.plannedDatesObject.correctiveForm).getTime(),remark:this.correctiveForm.value.remarkDescription,progress:this.correctiveForm.value.progress.content,effectiveCheckStatus:this.correctiveForm.value.effectiveCheckStatus&&this.correctiveForm.value.effectiveCheckStatus.content?this.correctiveForm.value.effectiveCheckStatus.content:"-",candidateForStandarisation:this.correctiveForm.value.candidateForStandarisation,candidateForStandarisationReason:this.correctiveForm.value.candidateForStandarisationReason,parentActionId:this.parentActionId}),this.correctiveForm.value.actionDate=new Date(this.plannedDatesObject.correctiveForm).getTime(),t.forEach("edit"!=this.mode?t=>{0==t.parentActionId&&delete t.parentActionId,this.addAction(t,e)}:t=>{t.type==this.actionObj.type?(0==t.parentActionId&&delete t.parentActionId,this.updateAction(t,e)):(0==t.parentActionId&&delete t.parentActionId,this.addAction(t,e))})}onActionAddSuccess(){this.onActionAdd.emit(!0)}onClose(e){}onCancel(){this.modalService.destroy(0),this.closeModal()}onCloseModal(){this.modalService.destroy(0)}selectTab(e){this.tabIndex=e}onReset(e){0==e?(this.containmentForm.reset(),this.selectedUsers.containmentForm="",this.containmentForm.value.actorId="",this.containmentForm.value.effectiveCheckStatus="",this.containmentForm.value.progress="",this.containmentForm.value.description="-",this.containmentForm.value.remark="-",this.plannedDatesObject.containmentForm=null,this.dateValues.containmentForm=[""],this.containmentForm.value.actionDate="",this.containmentForm.value.actionItemType="Containment Action",this.createContainmentAction()):1==e&&(this.correctiveForm.reset(),this.selectedUsers.correctiveForm="",this.correctiveForm.value.actorId="",this.correctiveForm.value.description="-",this.correctiveForm.value.remark="-",this.correctiveForm.value.effectiveCheckStatus="",this.correctiveForm.value.progress="",this.plannedDatesObject.correctiveForm=null,this.correctiveForm.value.candidateForStandarisation=[!1],this.dateValues.correctiveForm=[""],this.correctiveForm.value.actionDate="",this.correctiveForm.value.actionItemType="Corrective Action",this.containmentForm.value.candidateForStandarisationReason="",this.createActionForm())}getAnalysis(){this.analysisId&&(this.isAnalysisFormLoading=!0,this.analysisService.getAnalysis(this.currentid,this.analysisId).subscribe(e=>{if(e&&e.success){let t=e.response;this.analysisDataPoint.addedTimestamp=a.unix(t.addedTimestamp).format("DD MMM, YYYY HH:mm"),this.analysisDetails.SOPFollowed=t.isSOPFollowed,this.analysisDetails.analysisDescription=t.analysisDescription,this.analysisDetails.remarkDescription=t.remarkDescription,this.analysisDetails.abnormalityDescription=t.abnormalityDescription,this.analysisDetails.previousAnalysisFileArray=t.documents,this.isAbnormilitiesCauseLoading=!0,this.settingsService.getAbnormalityBySOPFollowed(t.isSOPFollowed).subscribe(e=>{if(e&&e.success){let n=e.response.find(e=>e.cause==t.abnormalityCause);this.analysisDetails.abnormilityCause=n.cause,this.analysisDetails.abnormilityCode=n.code,this.isAbnormilitiesCauseLoading=!1}},e=>{console.log("err",e),this.isAbnormilitiesCauseLoading=!1}),this.isAnalysisFormLoading=!1}}))}getActions(){this.analysisId&&"edit"==this.mode&&(this.isAnalysisFormLoading=!0,this.analysisService.getActionDetails(this.currentid,this.analysisId,this.actionId).subscribe(e=>{if(e&&e.success){let t,n=e.response;this.actionObj=n,"Containment Action"==n.type?(this.tabIndex=2,this.formType="containment",this.containmentActionId=n._id,t="containmentForm",this.formname="containmentForm",this.containmentForm.patchValue({description:n.description,actorId:n.actorId,progress:{content:n.progress,selected:!0},effectiveCheckStatus:{content:n.effectiveCheckStatus,selected:!0},remarkDescription:n.remark,actionItemType:n.type}),"Completed"==n.progress&&(this.containmentDisable=!0,this.showCFSObject[t]=!0,this.ProgressitemsTemp.push(Object.assign({content:"Rework",selected:!1})),this.ProgressitemsObjectOfArrays[t]=[...this.ProgressitemsTemp],n.cosRequestHistory&&(this.cosList[t]=n.cosRequestHistory,this.cosList[t].forEach(e=>{e.isExpanded=!1})),this.ProgressitemsTemp[3].selected=!0)):"Corrective Action"==n.type&&(this.formType="corrective",this.tabIndex=3,this.correctiveActionId=n._id,t="correctiveForm",this.formname="correctiveForm",this.correctiveForm.patchValue({description:n.description,actorId:n.actorId,progress:{content:n.progress,selected:!0},effectiveCheckStatus:{content:n.effectiveCheckStatus,selected:!0},remarkDescription:n.remark,actionItemType:n.type}),"Completed"==n.progress&&(this.correctiveDisable=!0,this.showCFSObject[t]=!0,this.ProgressitemsTemp.push(Object.assign({content:"Rework",selected:!1})),this.ProgressitemsObjectOfArrays[t]=[...this.ProgressitemsTemp],n.cosRequestHistory&&(this.cosList[t]=n.cosRequestHistory,this.cosList[t].forEach(e=>{e.isExpanded=!1})),!0===n.candidateForStandarisation&&(this.showReasonBox[t]=!0,this.correctiveForm.patchValue({candidateForStandarisationReason:n.candidateForStandarisationReason})),"Pending Approval"==n.candidateForStandarisationApprovalStatus||"Approved"==n.candidateForStandarisationApprovalStatus?this.isCosDisabled[t]=!0:"Rejected"==n.candidateForStandarisationApprovalStatus&&(this.cosCheckboxLabel[t]="Reapply for Candidate For Standardisation"),this.correctiveForm.patchValue({candidateForStandarisation:n.candidateForStandarisation,progress:{content:n.progress,selected:!0}}),this.ProgressitemsTemp[3].selected=!0)),this.selectedUsers[t]=n.actorName,this.setActorId(n.actorId,t),this.plannedDatesObject[t]=new Date(n.actionDate),this.dateValues[t]=[],this.dateValues[t].push(a(n.actionDate).format("DD/MM/YY")),this.getFileData(n._id,t)}this.isAnalysisFormLoading=!1}))}addAction(e,t){var n=[];n.push(e),this.analysisService.createAction({actions:n},this.currentid,t).subscribe(e=>{e&&e.success&&(e.response.forEach(e=>{"Containment Action"==e.type?this.containmentActionId=e._id:this.correctiveActionId=e._id}),this._toastrService.success("Action added."),null!=this.actionFiles.containmentForm&&this.uploadFile(this.actionFiles.containmentForm,t,this.fileRemark),null!=this.actionFiles.correctiveForm&&this.uploadFile(this.actionFiles.correctiveForm,t,this.fileRemark),this.onActionAddSuccess(),!0===e.response[0].candidateForStandarisation&&"Completed"===e.response[0].progress&&!0===this.hasCosChanged?this.showModal():this.onCloseModal(),this.isSubmitButtonLoading=!1)})}updateAction(e,t){this.analysisService.editAction(e,this.currentid,t,this.actionId).subscribe(n=>{n&&n.success&&(this._toastrService.success("Action updated."),null!=this.actionFiles.containmentForm&&this.uploadFile(this.actionFiles.containmentForm,t,this.fileRemark),null!=this.actionFiles.correctiveForm&&this.uploadFile(this.actionFiles.correctiveForm,t,this.fileRemark),this.onActionAddSuccess(),!0===e.candidateForStandarisation&&"Completed"===e.progress&&!0===this.hasCosChanged?this.showModal():this.onCloseModal(),this.isSubmitButtonLoading=!1)})}showModal(){this.modalService.create({component:c.a,inputs:{modalText:"Candidate for standardisation has been sent to your supervisor for approval."}}).onDestroy(()=>{this.onCloseModal()})}toggleExpand(e,t){t.isExpanded?(t.isExpanded=!1,t.actions=[]):t.isExpanded=!0}}},Atj1:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("VphZ"),l=n("O62A");class o extends l.a{constructor(){super(...arguments),this.chartType="bar",this.showPerformace=!1}getMaxSubGroupValue(e,t){let n=0;return e.forEach(e=>{t.forEach(t=>{e[t]>n&&(n=e[t])})}),n}drawChart(e,t,n,l,o){let s=this;if(e.selectAll("g").remove(),!l)return;let a=l.data||[];var r=l.subGroupLabels||[],c=i.o().key(function(e){return e}).entries(r);i.l(a,function(e){return e[l.xLabel]}).keys();let u=0;u=1===a.length?a[0].latestActual<0?1.5*a[0].latestActual:0:(u=a.reduce((e,t)=>t.latestActual<e?t.latestActual:e,a[0]?a[0].latestActual:0))<0?1.5*u:0;var d=1.1*this.getMaxSubGroupValue(a,r);t=t-50-10,n=(n*=.8)-20-20;var m=7*i.m(a.map(function(e){return e[l.xLabel].length}));m<80&&(m=80);var h=Math.round(t/m),p=m*a.length>t;let f=n;p&&(f=n+40);let g=n+20+20+25;p&&(g+=40),(e=e.attr("width",t+50+10).attr("height",g).append("g")).attr("class","d3Chart").attr("transform","translate(50,20)");var v=i.r().domain(a.slice(0,h).map(function(e){return e[l.xLabel]})).range([0,t]).padding([.2]),b=i.s().domain([u,d]).range([n,0]),F=i.c(v),y=i.d(b);e.append("g").attr("class","x axis").attr("transform","translate(0, "+n+")").call(F),s.drawBottomAxisLabel(e,t,f,l),e.append("g").attr("class","y axis").call(y),s.drawLeftAxisLabel(e,n,l),s.addGrid(e,t,n,v,l.bottomTicks,b);let x=v.bandwidth();x/r.length>17.5&&(x=17.5*r.length);let A=v.bandwidth()-x;var C=i.r().domain(r).range([0,x]).padding([.05]),w=i.o().key(function(e){return e[l.xLabel]}).entries(a);let S=s.toolTipMouseout(),I=s.toolTipMouseover(function(e){let t=w.find(t=>t.key==e[l.xLabel]),n=[];return t.values.forEach(e=>{let t=r.map(t=>({background:s.color(t),label:t,value:e[t]?parseFloat(e[t].toFixed(2)):e[t]}));n.push(...t)}),n},function(e){return e[l.xLabel]});var D=e.append("g").attr("class","bars");if(s.drawBars(D,r,v,b,a.slice(0,h),l,n,t,C,S,I,A),p){var O=e.append("g").attr("class","subBars");s.drawSubBars(O,r,v,b,a,l,n,t,C,30);var k=i.u().domain([0,t]).range(i.q(a.length+1));e.append("rect").attr("transform","translate(0, "+(n+20)+")").attr("class","mover").style("stroke","red").style("stroke-opacity",.1).style("fill","lightSteelBlue").style("fill-opacity",.5).attr("x",0).attr("y",0).attr("height",40).attr("width",Math.round(parseFloat(h*t+"")/a.length)).attr("pointer-events","all").attr("cursor","ew-resize").call(i.f().on("drag",function(){var o,c,u=parseInt(i.y(this).attr("x")),d=u+i.h.dx,m=parseInt(i.y(this).attr("width"));d<0||d+m>t||(i.y(this).attr("x",d),k(u)!==(o=k(d))&&(c=a.slice(o,o+h),v.domain(c.map(function(e){return e[l.xLabel]})),e.select(".x.axis").call(F),D.selectAll(".bargroup").remove(),s.drawBars(D,r,v,b,c,l,n,t,C,S,I,A)))}))}this.createHorizontalLegend(c)}drawSubBars(e,t,n,l,o,s,a,r,c,u){var d=i.r().domain(o.map(function(e){return e[s.xLabel]})).range([0,r]).padding([.2]),m=i.s().range([u,0]);m.domain(l.domain());var h=i.r().domain(t).range([0,d.bandwidth()]).padding([.05]);let p=this;e.selectAll("group").data(o).enter().append("g").attr("class","subbargroup").attr("transform",function(e){return"translate("+d(e[s.xLabel])+",0)"}).selectAll("rect").data(function(e){return t.map(function(t){return{key:t,value:e[t]}})}).enter().append("rect").style("fill","gray").style("opacity",.5).attr("data-legend",function(e){return e.key}).attr("x",function(e){return h(e.key)}).attr("y",function(e){return a+u+m(e.value)}).attr("width",h.bandwidth()).attr("height",function(e){return u-m(e.value)}).attr("fill",function(e){return p.color(e.key)})}drawBars(e,t,n,i,l,o,s,a,r,c,u,d){let m=this;e.selectAll("group").data(l).enter().append("g").attr("class","bargroup").attr("transform",function(e){let t=Number(n(e[o.xLabel]));return"translate("+(t+=d/2)+",0)"}).on("mouseout",c).on("mouseover",u).selectAll("rect").data(function(e){return t.map(function(t){return{key:t,value:e[t]}})}).enter().append("rect").attr("data-legend",function(e){return e.key}).attr("x",function(e){return r(e.key)}).attr("y",function(e){return i(e.value)}).attr("width",r.bandwidth()).attr("height",function(e){return s-i(e.value)}).attr("fill",function(e){return m.color(e.key)}),o.showDataPointLabelOnBar&&e.selectAll("group").data(l).enter().append("g").attr("transform",function(e){let t=Number(n(e[o.xLabel]));return"translate("+(t+=d/2)+",0)"}).selectAll("rect").data(function(e){return t.map(function(t){return{key:t,value:e[t]}})}).enter().append("text").text(function(e){let t=e.value;return t%1!=0&&(t=t?Number.parseFloat(t).toFixed(1):""),t}).attr("x",function(e){return r(e.key)+r.bandwidth()/2}).attr("y",function(e){return i(e.value)-2}).style("text-anchor","middle").style("fill","black").style("font-size","0.6875rem").style("transform",'rotate("-90deg")')}}},aHAg:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("ciZX");class l extends i.a{constructor(e,t){super(),this.modalService=e,this.injector=t,this.modalText=this.injector.get("modalText")}ngOnInit(){}closeModal(){this.modalService.destroy()}}},bW04:function(e,t,n){"use strict";var i=n("8Y7J"),l=n("UCDL"),o=n("lZcW"),s=n("SVse"),a=n("jGGp"),r=n("TXHj"),c=n("mEpm"),u=n("g7AK");n("Atj1"),n("PJ54"),n("qDrF"),n("/4G1"),n("5Pgy"),n("iInd"),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return P});var d=i["\u0275crt"]({encapsulation:0,styles:[".add-icon[_ngcontent-%COMP%] {\n        max-width: 16px;\n        max-height: 16px;\n    }\n\n    .add-reason[_ngcontent-%COMP%] {\n        margin-left: 5px;\n        border: none;\n        border-radius: 5px;\n        min-height: 10px;\n        height: 16px;\n        padding: 5px;\n        font-size: 10px;\n        pointer-events: all !important;\n        cursor: pointer !important;\n        outline: none;\n    }\n\n    .loader[_ngcontent-%COMP%] {\n        position: absolute;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background: white;\n        opacity: 1;\n    }\n\n    .loading-container[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        display: flex;\n        place-content: center;\n        background: white;\n        opacity: 0.7;\n    }\n\n    .center-loader-text[_ngcontent-%COMP%] {\n        display: flex;\n        align-items: center;\n        position: absolute;\n    }\n\n    .inline[_ngcontent-%COMP%] {\n        display: inline-block;\n    }\n\n    .value[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        color: #171717;\n        box-sizing: border-box;\n        font: inherit;\n        vertical-align: baseline;\n        font-weight: 400;\n        letter-spacing: 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        line-height: 16px;\n        font-size: 12px;\n        display: inline-block;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        width: auto;\n    }\n\n    .label[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        color: #171717;\n        box-sizing: border-box;\n        font: inherit;\n        vertical-align: baseline;\n        font-weight: 400;\n        letter-spacing: 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        line-height: 16px;\n        font-size: 12px;\n        display: inline-block;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        margin-left: 4px;\n        flex: 1;\n        margin-right: 8px;\n    }\n\n    .tooltip-color[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        color: #0062ff;\n        position: absolute;\n        left: 0;\n        \n        width: 4px;\n        height: 22px;\n        background-color: #DA1E28;\n    }\n\n    .date-tooltip[_ngcontent-%COMP%], .datapoint-tooltip[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        color: #171717;\n        box-sizing: border-box;\n        margin: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        outline: none;\n        display: flex;\n        padding: 4px;\n        flex-flow: row nowrap;\n        width: auto;\n        min-width: 20px;\n        justify-content: flex-start;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .content-box[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        outline: none;\n        color: #171717;\n        position: relative;\n    }\n\n    .mytooltip[_ngcontent-%COMP%] {\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n        letter-spacing: 0.16px;\n        color: #152935;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        outline: none;\n        background-color: #ffffff;\n        transition: opacity 0.1s;\n        transition-timing-function: cubic-bezier(0.4, 0.14, 0.3, 1);\n        display: inline;\n        box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.2);\n        position: absolute;\n        word-wrap: break-word;\n        z-index: 1059;\n        font-family: 'IBM Plex Sans Condensed', 'Helvetica Neue', Arial, sans-serif;\n        top: 24px;\n        left: 642px;\n        display: none;\n    }\n\n    .legend-container[_ngcontent-%COMP%] {\n        display: flex;\n        flex-wrap: wrap;\n        max-height: 82px;\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n\n    .legend[_ngcontent-%COMP%] {\n        display: flex;\n        margin-bottom: 8px;\n    }\n\n    .legendLabel[_ngcontent-%COMP%] {\n        margin-right: 16px;\n        margin-left: 8px;\n    }\n\n    .svg-container[_ngcontent-%COMP%] {\n        width: 13px;\n        height: 13px;\n        min-width: 13px;\n        min-height: 13px;\n    }\n\n    .date[_ngcontent-%COMP%] {\n        font-weight: bold;\n        font-size: 14px;\n        margin: auto;\n    }\n\n    .abnormality-div[_ngcontent-%COMP%] {\n        margin-bottom: 5px;\n        margin-left: 5px;\n        margin-top: 5px;\n        font-size: 12px;\n        display: block;\n        max-width: 110px;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .see-more-abn[_ngcontent-%COMP%] {\n        text-align: center;\n        font-size: 11px;\n        color: blue;\n        cursor: pointer;\n    }\n\n    .hyper-link[_ngcontent-%COMP%] {\n        color: blue;\n        text-decoration: underline;\n    }\n\n    .icon-16-green[_ngcontent-%COMP%] {\n        fill: green;\n    }\n\n    .icon-16-red[_ngcontent-%COMP%] {\n        fill: red;\n    }\n\n    .show-performance[_ngcontent-%COMP%] {\n        margin-left: auto;\n        margin-right: 2.50rem;\n    }\n\n    .directionGoodness[_ngcontent-%COMP%] {\n        display: flex;\n        margin-right: 25px;\n    }\n\n    .kpiperformance[_ngcontent-%COMP%] {\n        display: flex;\n    }\n\n    .directionGoodness[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .kpiperformance[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n        font-size: 14px;\n        line-height: 0.8rem;\n        display: flex;\n        align-items: end;\n    }\n\n    .graph-top__markers[_ngcontent-%COMP%] {\n        position: absolute;\n        right: 0;\n    }",["[_nghost-%COMP%]{display:block;height:482px;width:482px;margin:auto}.wrapper[_ngcontent-%COMP%]{position:relative;max-width:100%;max-height:100%}svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]],data:{}});function m(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowUp16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,l.a,[i.ElementRef],null,null)],null,null)}function h(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowDown16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,o.a,[i.ElementRef],null,null)],null,null)}function p(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["NA"]))],null,null)}function f(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-16-green"],["ibmIconArrowUp16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,l.a,[i.ElementRef],null,null)],null,null)}function g(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,":svg:svg",[["class","icon-16-red"],["ibmIconArrowDown16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,o.a,[i.ElementRef],null,null)],null,null)}function v(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,16,"div",[["class","legend show-performance"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,6,"div",[["class","directionGoodness"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Direction\xa0of\xa0Goodness: "])),(e()(),i["\u0275and"](16777216,null,null,1,null,m)),i["\u0275did"](5,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,h)),i["\u0275did"](7,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](8,0,null,null,8,"div",[["class","kpiperformance"]],null,null,null,null,null)),(e()(),i["\u0275eld"](9,0,null,null,7,"p",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["KPI\xa0Performance: "])),(e()(),i["\u0275and"](16777216,null,null,1,null,p)),i["\u0275did"](12,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,f)),i["\u0275did"](14,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,g)),i["\u0275did"](16,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,5,0,n.dogForSingleKPI&&"HTB"==n.dogForSingleKPI),e(t,7,0,n.dogForSingleKPI&&"LTB"==n.dogForSingleKPI),e(t,12,0,!n.kpiPerformance),e(t,14,0,"GREEN"===n.kpiPerformance),e(t,16,0,"RED"===n.kpiPerformance)},null)}function b(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,3,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowUp16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,l.a,[i.ElementRef],null,null),(e()(),i["\u0275eld"](3,0,null,null,1,":svg:title",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["HTB"]))],null,null)}function F(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,3,":svg:svg",[["class","icon-navigation-arrow-up-16"],["ibmIconArrowDown16",""]],null,null,null,null,null)),i["\u0275did"](2,4210688,null,0,o.a,[i.ElementRef],null,null),(e()(),i["\u0275eld"](3,0,null,null,1,":svg:title",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["LTB"]))],null,null)}function y(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,9,"div",[["class","legend"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,2,"div",[["class","svg-container"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,0,":svg:rect",[["height","15"],["rx","1"],["ry","1"],["width","15"],["x","0"],["y","0"]],[[4,"fill",null]],null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","legendLabel"],["style","display: flex;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](5,null,[" "," "])),(e()(),i["\u0275and"](16777216,null,null,1,null,b)),i["\u0275did"](7,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,F)),i["\u0275did"](9,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,7,0,t.context.$implicit&&t.context.$implicit.dog&&"HTB"==t.context.$implicit.dog),e(t,9,0,t.context.$implicit&&t.context.$implicit.dog&&"LTB"==t.context.$implicit.dog)},function(e,t){e(t,3,0,t.context.$implicit.color),e(t,5,0,t.context.$implicit.label)})}function x(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["style","display: flex;flex-wrap: wrap;"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,y)),i["\u0275did"](2,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,2,0,t.component.legendAttr)},null)}function A(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,6,"div",[["class","loader"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,0,"div",[["class","loading-container"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,4,"div",[["class","metadiv center-loader-text"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,1,"ibm-loading",[["class","inline"],["size","sm"]],[[2,"bx--loading-overlay",null]],null,null,a.b,a.a)),i["\u0275did"](4,49152,null,0,r.a,[c.a],{size:[0,"size"]},null),(e()(),i["\u0275eld"](5,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Loading..."]))],function(e,t){e(t,4,0,"sm")},function(e,t){e(t,3,0,i["\u0275nov"](t,4).overlay)})}function C(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"p",[["class","value"]],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,[" ",""])),i["\u0275ppd"](2,2)],null,function(e,t){var n=t.component,l=i["\u0275unv"](t,1,0,e(t,2,0,i["\u0275nov"](t.parent,0),n.dataPoints[0].dataPointDate,"mediumDate"));e(t,1,0,l)})}function w(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,5,"div",[["class","datapoint-tooltip"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,0,"a",[["class","tooltip-color"]],[[4,"background",null]],null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,1,"p",[["class","label"]],null,null,null,null,null)),(e()(),i["\u0275ted"](4,null,["",""])),(e()(),i["\u0275eld"](5,0,null,null,1,"p",[["class","value"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""]))],null,function(e,t){e(t,2,0,t.context.$implicit.background),e(t,4,0,t.context.$implicit.label),e(t,6,0,t.context.$implicit.value)})}function S(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","date-tooltip"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"p",[["class","date"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Analysis"]))],null,null)}function I(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","abnormality-div hyper-link"]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.showMoreAbn(n,e.context.$implicit)&&i),i},null,null)),(e()(),i["\u0275ted"](1,null,[" ",". ",""]))],null,function(e,t){e(t,0,0,i["\u0275inlineInterpolate"](1,"",t.context.$implicit.abnormalityDescription,"")),e(t,1,0,t.context.index+1,t.context.$implicit.abnormalityDescription)})}function D(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","abnormality-div see-more-abn"],["title","See more"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.showMoreAbn(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["See more"]))],null,null)}function O(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,S)),i["\u0275did"](2,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,I)),i["\u0275did"](4,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,D)),i["\u0275did"](6,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.abnormalities&&n.abnormalities.length>0),e(t,4,0,n.abnormalities),e(t,6,0,n.moreAbnormalities)},null)}function k(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"div",[["class","date-tooltip"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,2,"button",[["class","add-reason"],["ibmButton","danger"]],[[2,"bx--btn",null],[2,"bx--btn--primary",null],[2,"bx--btn--secondary",null],[2,"bx--btn--tertiary",null],[2,"bx--btn--ghost",null],[2,"bx--btn--danger",null],[2,"bx--btn--danger--primary",null],[2,"bx--skeleton",null],[2,"bx--btn--sm",null],[2,"bx--toolbar-action",null],[2,"bx--overflow-menu",null]],[[null,"click"]],function(e,t,n){var i=!0,l=e.component;return"click"===t&&(i=!1!==l.onAddAnalysis(n,l.dataPoint)&&i),i},null,null)),i["\u0275did"](2,16384,null,0,u.a,[],{ibmButton:[0,"ibmButton"]},null),(e()(),i["\u0275ted"](-1,null,[" Add Analysis "]))],function(e,t){e(t,2,0,"danger")},function(e,t){e(t,1,1,[i["\u0275nov"](t,2).baseClass,i["\u0275nov"](t,2).primaryButton,i["\u0275nov"](t,2).secondaryButton,i["\u0275nov"](t,2).tertiaryButton,i["\u0275nov"](t,2).ghostButton,i["\u0275nov"](t,2).dangerButton,i["\u0275nov"](t,2).dangerPrimaryButton,i["\u0275nov"](t,2).skeleton,i["\u0275nov"](t,2).smallSize,i["\u0275nov"](t,2).toolbarAction,i["\u0275nov"](t,2).overflowMenu])})}function P(e){return i["\u0275vid"](0,[i["\u0275pid"](0,s.DatePipe,[i.LOCALE_ID]),i["\u0275qud"](671088640,1,{svgRef:0}),(e()(),i["\u0275eld"](2,0,null,null,27,"div",[["class","wrapper"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,2,"div",[["class","legend-container graph-top__markers"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,v)),i["\u0275did"](5,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](6,0,[[1,0],["svg",1]],null,0,":svg:svg",[],null,null,null,null,null)),(e()(),i["\u0275eld"](7,0,null,null,2,"div",[["class","legend-container"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,x)),i["\u0275did"](9,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,A)),i["\u0275did"](11,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](12,0,null,null,17,"div",[["class","clickable mytooltip"]],[[4,"display",null],[4,"top","px"],[4,"left","px"]],null,null,null,null)),(e()(),i["\u0275eld"](13,0,null,null,16,"div",[["class","content-box"]],null,null,null,null,null)),(e()(),i["\u0275eld"](14,0,null,null,15,"div",[["class","multi-tooltip"]],null,null,null,null,null)),(e()(),i["\u0275eld"](15,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](16,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](17,0,null,null,2,"div",[["class","date-tooltip"]],null,null,null,null,null)),(e()(),i["\u0275eld"](18,0,null,null,1,"p",[["class","date"]],null,null,null,null,null)),(e()(),i["\u0275ted"](19,null,["",""])),(e()(),i["\u0275eld"](20,0,null,null,2,"div",[["style","text-align: center; align-items: center;"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,C)),i["\u0275did"](22,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,w)),i["\u0275did"](24,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275eld"](25,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,O)),i["\u0275did"](27,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,k)),i["\u0275did"](29,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,5,0,n.showPerformace),e(t,9,0,n.displayLegend),e(t,11,0,n.loading),e(t,22,0,n.dataPoints.length>0&&n.dataPoints[0].dataPointDate),e(t,24,0,n.dataPoints),e(t,27,0,n.isAbnormality),e(t,29,0,n.isAbnormality)},function(e,t){var n=t.component;e(t,12,0,n.displayToolTip,n.toolTipTop,n.toolTipLeft),e(t,19,0,n.toolTipPeriod)})}}}]);